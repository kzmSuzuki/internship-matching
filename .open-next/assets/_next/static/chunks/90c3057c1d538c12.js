(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31278,e=>{"use strict";let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},39964,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(75157);let n=(0,a.forwardRef)(({className:e,...a},n)=>(0,t.jsx)("div",{ref:n,className:(0,r.cn)("glass rounded-2xl p-6 transition-all duration-300",e),...a}));n.displayName="Card",e.s(["Card",0,n])},59544,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(75157),n=e.i(31278);let i=(0,a.forwardRef)(({className:e,variant:a="primary",size:i="md",isLoading:s,children:o,disabled:c,...d},l)=>(0,t.jsxs)("button",{ref:l,className:(0,r.cn)("inline-flex items-center justify-center rounded-lg font-medium transition-all focus:outline-none focus:ring-2 focus:ring-[#1E3A5F]/50 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-gradient-to-r from-[#161B33] to-[#142841] text-white shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all duration-300 border border-white/10",secondary:"glass-button text-[#1E3A5F] bg-white/40 hover:bg-white/60",outline:"glass-button border border-[#1E3A5F]/30 text-[#1E3A5F] hover:bg-[#1E3A5F]/5",ghost:"text-[#1E3A5F] hover:bg-[#1E3A5F]/10",danger:"glass-button bg-gradient-to-r from-[#F56565] to-[#E53E3E] text-white border-0"}[a],{sm:"h-8 px-3 text-sm",md:"h-10 px-4 py-2",lg:"h-12 px-6 text-lg"}[i],e),disabled:c||s,...d,children:[s&&(0,t.jsx)(n.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),o]}));i.displayName="Button",e.s(["Button",0,i])},96640,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(75157);let n=(0,a.forwardRef)(({className:e,variant:a="default",...n},i)=>(0,t.jsx)("span",{ref:i,className:(0,r.cn)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium transition-colors",{default:"bg-[#1E3A5F]/10 text-[#161B33]",success:"bg-[#48BB78]/10 text-[#48BB78]",warning:"bg-[#ED8936]/10 text-[#ED8936]",error:"bg-[#F56565]/10 text-[#F56565]",outline:"border border-gray-200 text-gray-500"}[a],e),...n}));n.displayName="Badge",e.s(["Badge",0,n])},1851,e=>{"use strict";var t=e.i(55545),a=e.i(55024),r=e.i(99151),n=e.i(45110),i=e.i(34662),s=e.i(81092);function o(e,t){let a=(0,s.toDate)(e,t?.in);return a.setHours(0,0,0,0),a}function c(e,t){let r=(0,a.getDefaultOptions)(),n=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,i=(0,s.toDate)(e,t?.in),o=i.getDay();return i.setDate(i.getDate()-(7*(o<n)+o-n)),i.setHours(0,0,0,0),i}function d(e,t){return c(e,{...t,weekStartsOn:1})}var l=e.i(77241);function u(e,t){let a=(0,s.toDate)(e,t?.in),r=a.getFullYear(),n=(0,l.constructFrom)(a,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);let i=d(n),o=(0,l.constructFrom)(a,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);let c=d(o);return a.getTime()>=i.getTime()?r+1:a.getTime()>=c.getTime()?r:r-1}function h(e,t){let r=(0,s.toDate)(e,t?.in),n=r.getFullYear(),i=(0,a.getDefaultOptions)(),o=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,d=(0,l.constructFrom)(t?.in||e,0);d.setFullYear(n+1,0,o),d.setHours(0,0,0,0);let u=c(d,t),h=(0,l.constructFrom)(t?.in||e,0);h.setFullYear(n,0,o),h.setHours(0,0,0,0);let m=c(h,t);return+r>=+u?n+1:+r>=+m?n:n-1}function m(e,t){let a=Math.abs(e).toString().padStart(t,"0");return(e<0?"-":"")+a}let f={y(e,t){let a=e.getFullYear(),r=a>0?a:1-a;return m("yy"===t?r%100:r,t.length)},M(e,t){let a=e.getMonth();return"M"===t?String(a+1):m(a+1,2)},d:(e,t)=>m(e.getDate(),t.length),a(e,t){let a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];default:return"am"===a?"a.m.":"p.m."}},h:(e,t)=>m(e.getHours()%12||12,t.length),H:(e,t)=>m(e.getHours(),t.length),m:(e,t)=>m(e.getMinutes(),t.length),s:(e,t)=>m(e.getSeconds(),t.length),S(e,t){let a=t.length;return m(Math.trunc(e.getMilliseconds()*Math.pow(10,a-3)),t.length)}},p={G:function(e,t,a){let r=+(e.getFullYear()>0);switch(t){case"G":case"GG":case"GGG":return a.era(r,{width:"abbreviated"});case"GGGGG":return a.era(r,{width:"narrow"});default:return a.era(r,{width:"wide"})}},y:function(e,t,a){if("yo"===t){let t=e.getFullYear();return a.ordinalNumber(t>0?t:1-t,{unit:"year"})}return f.y(e,t)},Y:function(e,t,a,r){let n=h(e,r),i=n>0?n:1-n;return"YY"===t?m(i%100,2):"Yo"===t?a.ordinalNumber(i,{unit:"year"}):m(i,t.length)},R:function(e,t){return m(u(e),t.length)},u:function(e,t){return m(e.getFullYear(),t.length)},Q:function(e,t,a){let r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return m(r,2);case"Qo":return a.ordinalNumber(r,{unit:"quarter"});case"QQQ":return a.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(r,{width:"narrow",context:"formatting"});default:return a.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,a){let r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return m(r,2);case"qo":return a.ordinalNumber(r,{unit:"quarter"});case"qqq":return a.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(r,{width:"narrow",context:"standalone"});default:return a.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,a){let r=e.getMonth();switch(t){case"M":case"MM":return f.M(e,t);case"Mo":return a.ordinalNumber(r+1,{unit:"month"});case"MMM":return a.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(r,{width:"narrow",context:"formatting"});default:return a.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,a){let r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return m(r+1,2);case"Lo":return a.ordinalNumber(r+1,{unit:"month"});case"LLL":return a.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(r,{width:"narrow",context:"standalone"});default:return a.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){let o,d,u,f,p,g=Math.round((c(o=(0,s.toDate)(e,n?.in),n)-(d=(0,a.getDefaultOptions)(),u=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??d.firstWeekContainsDate??d.locale?.options?.firstWeekContainsDate??1,f=h(o,n),(p=(0,l.constructFrom)(n?.in||o,0)).setFullYear(f,0,u),p.setHours(0,0,0,0),c(p,n)))/i.millisecondsInWeek)+1;return"wo"===t?r.ordinalNumber(g,{unit:"week"}):m(g,t.length)},I:function(e,t,a){let r,n,o,c=Math.round((d(r=(0,s.toDate)(e,void 0))-(n=u(r,void 0),(o=(0,l.constructFrom)(r,0)).setFullYear(n,0,4),o.setHours(0,0,0,0),d(o)))/i.millisecondsInWeek)+1;return"Io"===t?a.ordinalNumber(c,{unit:"week"}):m(c,t.length)},d:function(e,t,a){return"do"===t?a.ordinalNumber(e.getDate(),{unit:"date"}):f.d(e,t)},D:function(e,t,a){let c,d,l=function(e,t,a){let[s,c]=(0,n.normalizeDates)(void 0,e,t),d=o(s),l=o(c);return Math.round((d-(0,r.getTimezoneOffsetInMilliseconds)(d)-(l-(0,r.getTimezoneOffsetInMilliseconds)(l)))/i.millisecondsInDay)}(c=(0,s.toDate)(e,void 0),((d=(0,s.toDate)(c,void 0)).setFullYear(d.getFullYear(),0,1),d.setHours(0,0,0,0),d))+1;return"Do"===t?a.ordinalNumber(l,{unit:"dayOfYear"}):m(l,t.length)},E:function(e,t,a){let r=e.getDay();switch(t){case"E":case"EE":case"EEE":return a.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(r,{width:"short",context:"formatting"});default:return a.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,a,r){let n=e.getDay(),i=(n-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return m(i,2);case"eo":return a.ordinalNumber(i,{unit:"day"});case"eee":return a.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(n,{width:"short",context:"formatting"});default:return a.day(n,{width:"wide",context:"formatting"})}},c:function(e,t,a,r){let n=e.getDay(),i=(n-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return m(i,t.length);case"co":return a.ordinalNumber(i,{unit:"day"});case"ccc":return a.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(n,{width:"narrow",context:"standalone"});case"cccccc":return a.day(n,{width:"short",context:"standalone"});default:return a.day(n,{width:"wide",context:"standalone"})}},i:function(e,t,a){let r=e.getDay(),n=0===r?7:r;switch(t){case"i":return String(n);case"ii":return m(n,t.length);case"io":return a.ordinalNumber(n,{unit:"day"});case"iii":return a.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(r,{width:"short",context:"formatting"});default:return a.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,a){let r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(r,{width:"narrow",context:"formatting"});default:return a.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,a){let r,n=e.getHours();switch(r=12===n?"noon":0===n?"midnight":n/12>=1?"pm":"am",t){case"b":case"bb":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(r,{width:"narrow",context:"formatting"});default:return a.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,a){let r,n=e.getHours();switch(r=n>=17?"evening":n>=12?"afternoon":n>=4?"morning":"night",t){case"B":case"BB":case"BBB":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(r,{width:"narrow",context:"formatting"});default:return a.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,a){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),a.ordinalNumber(t,{unit:"hour"})}return f.h(e,t)},H:function(e,t,a){return"Ho"===t?a.ordinalNumber(e.getHours(),{unit:"hour"}):f.H(e,t)},K:function(e,t,a){let r=e.getHours()%12;return"Ko"===t?a.ordinalNumber(r,{unit:"hour"}):m(r,t.length)},k:function(e,t,a){let r=e.getHours();return(0===r&&(r=24),"ko"===t)?a.ordinalNumber(r,{unit:"hour"}):m(r,t.length)},m:function(e,t,a){return"mo"===t?a.ordinalNumber(e.getMinutes(),{unit:"minute"}):f.m(e,t)},s:function(e,t,a){return"so"===t?a.ordinalNumber(e.getSeconds(),{unit:"second"}):f.s(e,t)},S:function(e,t){return f.S(e,t)},X:function(e,t,a){let r=e.getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return w(r);case"XXXX":case"XX":return x(r);default:return x(r,":")}},x:function(e,t,a){let r=e.getTimezoneOffset();switch(t){case"x":return w(r);case"xxxx":case"xx":return x(r);default:return x(r,":")}},O:function(e,t,a){let r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+g(r,":");default:return"GMT"+x(r,":")}},z:function(e,t,a){let r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+g(r,":");default:return"GMT"+x(r,":")}},t:function(e,t,a){return m(Math.trunc(e/1e3),t.length)},T:function(e,t,a){return m(+e,t.length)}};function g(e,t=""){let a=e>0?"-":"+",r=Math.abs(e),n=Math.trunc(r/60),i=r%60;return 0===i?a+String(n):a+String(n)+t+m(i,2)}function w(e,t){return e%60==0?(e>0?"-":"+")+m(Math.abs(e)/60,2):x(e,t)}function x(e,t=""){let a=Math.abs(e);return(e>0?"-":"+")+m(Math.trunc(a/60),2)+t+m(a%60,2)}let y=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},b=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},v={p:b,P:(e,t)=>{let a,r=e.match(/(P+)(p+)?/)||[],n=r[1],i=r[2];if(!i)return y(e,t);switch(n){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;default:a=t.dateTime({width:"full"})}return a.replace("{{date}}",y(n,t)).replace("{{time}}",b(i,t))}},k=/^D+$/,j=/^Y+$/,M=["D","DD","YY","YYYY"],N=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,D=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,E=/^'([^]*?)'?$/,T=/''/g,I=/[a-zA-Z]/;function S(e,r,n){let i=(0,a.getDefaultOptions)(),o=n?.locale??i.locale??t.defaultLocale,c=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,d=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,l=(0,s.toDate)(e,n?.in);if(!(l instanceof Date||"object"==typeof l&&"[object Date]"===Object.prototype.toString.call(l))&&"number"!=typeof l||isNaN(+(0,s.toDate)(l)))throw RangeError("Invalid time value");let u=r.match(D).map(e=>{let t=e[0];return"p"===t||"P"===t?(0,v[t])(e,o.formatLong):e}).join("").match(N).map(e=>{if("''"===e)return{isToken:!1,value:"'"};let t=e[0];if("'"===t){var a;let t;return{isToken:!1,value:(t=(a=e).match(E))?t[1].replace(T,"'"):a}}if(p[t])return{isToken:!0,value:e};if(t.match(I))throw RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});o.localize.preprocessor&&(u=o.localize.preprocessor(l,u));let h={firstWeekContainsDate:c,weekStartsOn:d,locale:o};return u.map(t=>{if(!t.isToken)return t.value;let a=t.value;return(!n?.useAdditionalWeekYearTokens&&j.test(a)||!n?.useAdditionalDayOfYearTokens&&k.test(a))&&function(e,t,a){var r,n,i;let s,o=(r=e,n=t,i=a,s="Y"===r[0]?"years":"days of the month",`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${n}\`) for formatting ${s} to the input \`${i}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`);if(console.warn(o),M.includes(e))throw RangeError(o)}(a,r,String(e)),(0,p[a[0]])(l,a,o.localize,h)}).join("")}e.s(["format",()=>S],1851)},87316,e=>{"use strict";let t=(0,e.i(75254).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],87316)},42920,e=>{"use strict";let t=(0,e.i(75254).default)("building",[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]]);e.s(["Building",()=>t],42920)},46897,e=>{"use strict";let t=(0,e.i(75254).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>t],46897)},79504,e=>{"use strict";var t=e.i(59141);e.i(36180);var a=e.i(98925);let r=new class{async applyJob(e,r,n,i=""){try{return await (0,a.runTransaction)(t.db,async s=>{let o=(0,a.collection)(t.db,"applications"),c=(0,a.query)(o,(0,a.where)("studentId","==",e),(0,a.where)("status","in",["pending_admin","pending_company","pending_student","matched"]));if(!(await (0,a.getDocs)(c)).empty)throw Error("Already have an active application");let d=(0,a.doc)((0,a.collection)(t.db,"applications")),l={jobId:r,studentId:e,companyId:n,status:"pending_admin",message:i,createdAt:(0,a.serverTimestamp)(),updatedAt:(0,a.serverTimestamp)()},u=(0,a.doc)((0,a.collection)(t.db,"notifications")),h={userId:"admin",type:"job_applied",title:"新規応募がありました",message:`求人ID: ${r} に新しい応募があります。`,link:`/admin/applications/${d.id}`,read:!1,createdAt:(0,a.serverTimestamp)()};return s.set(d,l),s.set(u,h),d.id})}catch(e){throw console.error("MatchingService.applyJob error:",e),e}}async acceptMatchByStudent(e,r){await (0,a.runTransaction)(t.db,async n=>{let i=(0,a.doc)(t.db,"applications",e),s=await n.get(i);if(!s.exists())throw Error("Application not found");let o=s.data();if(o.studentId!==r)throw Error("Unauthorized");if("pending_student"!==o.status)throw Error("Invalid status");n.update(i,{status:"matched",updatedAt:(0,a.serverTimestamp)()});let c=(0,a.doc)((0,a.collection)(t.db,"matches")),d={applicationId:e,jobId:o.jobId,studentId:o.studentId,companyId:o.companyId,status:"active",startDate:(0,a.serverTimestamp)(),createdAt:(0,a.serverTimestamp)()};n.set(c,d),n.update(i,{matchId:c.id});let l=(0,a.doc)((0,a.collection)(t.db,"notifications"));n.set(l,{userId:o.companyId,type:"offer_accepted",title:"マッチング成立！",message:"学生がオファーを承諾しました。インターンシップの準備を始めましょう。",link:`/company/intern/${c.id}`,read:!1,createdAt:(0,a.serverTimestamp)()})})}async approveByCompany(e,r){await (0,a.runTransaction)(t.db,async n=>{let i=(0,a.doc)(t.db,"applications",e),s=await n.get(i);if(!s.exists())throw Error("Application not found");let o=s.data();if(o.companyId!==r)throw Error("Unauthorized");if("pending_company"!==o.status)throw Error("Invalid status (Must be pending_company)");n.update(i,{status:"pending_student",updatedAt:(0,a.serverTimestamp)()});let c=(0,a.doc)((0,a.collection)(t.db,"notifications"));n.set(c,{userId:o.studentId,type:"offer_received",title:"マッチングオファーが届きました！",message:"企業があなたの応募に関心を持っています。オファーを確認してください。",link:"/student/applications",read:!1,createdAt:(0,a.serverTimestamp)()})})}async rejectByCompany(e,r){await (0,a.runTransaction)(t.db,async n=>{let i=(0,a.doc)(t.db,"applications",e),s=await n.get(i);if(!s.exists())throw Error("Application not found");let o=s.data();if(o.companyId!==r)throw Error("Unauthorized");n.update(i,{status:"rejected_by_company",updatedAt:(0,a.serverTimestamp)()});let c=(0,a.doc)((0,a.collection)(t.db,"notifications"));n.set(c,{userId:o.studentId,type:"offer_rejected",title:"選考結果のお知らせ",message:"残念ながら今回の応募は見送られました。",link:"/student/applications",read:!1,createdAt:(0,a.serverTimestamp)()})})}async approveByAdmin(e){await (0,a.runTransaction)(t.db,async r=>{let n=(0,a.doc)(t.db,"applications",e),i=await r.get(n);if(!i.exists())throw Error("Application not found");let s=i.data();if("pending_admin"!==s.status)throw Error("Invalid status");r.update(n,{status:"pending_company",updatedAt:(0,a.serverTimestamp)()});let o=(0,a.doc)((0,a.collection)(t.db,"notifications"));r.set(o,{userId:s.companyId,type:"application_approved_admin",title:"新しい応募が届きました",message:"管理者承認済みの応募があります。内容を確認してください。",link:"/company/applicants",read:!1,createdAt:(0,a.serverTimestamp)()})})}};e.s(["matchingService",0,r])},63209,e=>{"use strict";let t=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},18050,e=>{"use strict";var t=e.i(43476),a=e.i(71645);e.i(36180);var r=e.i(98925),n=e.i(59141),i=e.i(57951),s=e.i(59544),o=e.i(39964),c=e.i(96640),d=e.i(31278),l=e.i(46897),u=e.i(42920),h=e.i(87316),m=e.i(63209),f=e.i(1851),p=e.i(18566),g=e.i(79504);function w({params:e}){let{id:w}=(0,a.use)(e),{user:x}=(0,i.useAuth)(),[y,b]=(0,a.useState)(null),[v,k]=(0,a.useState)(null),[j,M]=(0,a.useState)(!0),[N,D]=(0,a.useState)(!1),[E,T]=(0,a.useState)(null),[I,S]=(0,a.useState)(null),F=(0,p.useRouter)();(0,a.useEffect)(()=>{!async function(){try{let e=await (0,r.getDoc)((0,r.doc)(n.db,"jobPostings",w));if(!e.exists())return void M(!1);let t=e.data();b({...t,id:e.id});let a=(0,r.query)((0,r.collection)(n.db,"companies"),(0,r.where)("userId","==",t.companyId)),i=await (0,r.getDocs)(a);if(i.empty||k(i.docs[0].data()),t.pdfFileId&&S(`/api/pdf/${t.pdfFileId}`),x){let e=(0,r.query)((0,r.collection)(n.db,"applications"),(0,r.where)("studentId","==",x.id),(0,r.where)("status","in",["pending_admin","pending_company","pending_student","matched"])),t=await (0,r.getDocs)(e);t.empty||T(t.docs[0].data())}}catch(e){console.error("Error fetching job details:",e)}finally{M(!1)}}()},[w,x]);let A=async()=>{if(x&&y){if(E&&["pending_admin","pending_company","pending_student","matched"].includes(E.status))return void alert("既に応募中の求人があります。新たな応募はできません。");if(confirm("この求人に応募しますか？\n※同時に応募できるのは1件のみです。")){D(!0);try{await g.matchingService.applyJob(x.id,y.id,y.companyId,"応募しました"),F.push("/student/applications")}catch(e){console.error("Error applying:",e),alert("応募に失敗しました: "+e.message)}finally{D(!1)}}}};if(j)return(0,t.jsx)("div",{className:"flex justify-center p-12",children:(0,t.jsx)(d.Loader2,{className:"animate-spin"})});if(!y)return(0,t.jsx)("div",{className:"text-center p-12",children:"求人が見つかりません"});let P=E?.jobId===y.id,B=!!E;return(0,t.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,t.jsx)(o.Card,{className:"p-8",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-[#1E3A5F] mb-2",children:y.title}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-gray-600 mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(u.Building,{size:16}),(0,t.jsx)("span",{children:v?.name||"企業名不明"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(l.MapPin,{size:16}),(0,t.jsx)("span",{children:y.location})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(h.Calendar,{size:16}),(0,t.jsx)("span",{children:y.createdAt?(0,f.format)(y.createdAt.toDate(),"yyyy/MM/dd"):"-"})]})]}),(0,t.jsx)("div",{className:"flex gap-2",children:y.requirements.map((e,a)=>(0,t.jsx)(c.Badge,{variant:"outline",className:"bg-gray-50",children:e},a))})]}),(0,t.jsx)("div",{className:"md:text-right",children:B?(0,t.jsxs)("div",{className:"flex flex-col items-end gap-2 text-warning-600",children:[P?(0,t.jsx)(c.Badge,{variant:"success",className:"text-lg px-4 py-2",children:"応募済み"}):(0,t.jsx)(c.Badge,{variant:"warning",className:"text-lg px-4 py-2 opacity-50 cursor-not-allowed",children:"他の求人に応募中"}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"※同時に応募できるのは1件のみです"})]}):(0,t.jsx)(s.Button,{size:"lg",onClick:A,isLoading:N,children:"この求人に応募する"})})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsx)("div",{className:"md:col-span-2 space-y-6",children:(0,t.jsxs)(o.Card,{className:"p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-bold mb-4 border-b pb-2",children:"募集要項 (PDF)"}),I?(0,t.jsx)("div",{className:"aspect-[1/1.4] w-full bg-gray-100 rounded-lg flex items-center justify-center border",children:(0,t.jsx)("iframe",{src:I,className:"w-full h-full rounded-lg",title:"Job PDF"})}):(0,t.jsxs)("div",{className:"aspect-[1/1.4] w-full bg-gray-50 rounded-lg flex flex-col items-center justify-center text-gray-400",children:[(0,t.jsx)(m.AlertCircle,{size:48,className:"mb-2"}),(0,t.jsx)("p",{children:"PDFファイルがありません"})]})]})}),(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)(o.Card,{className:"p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-bold mb-4",children:"企業情報"}),(0,t.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-gray-500 text-xs block",children:"業界"}),(0,t.jsx)("p",{children:v?.industry||"-"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-gray-500 text-xs block",children:"住所"}),(0,t.jsx)("p",{children:v?.address||"-"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-gray-500 text-xs block",children:"Webサイト"}),(0,t.jsx)("a",{href:v?.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline truncate block",children:v?.website||"-"})]})]})]})})]})]})}e.s(["default",()=>w])}]);