"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1208],{1047:function(e,t,r){r.d(t,{Z:function(){return a}});let a=(0,r(8755).Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},9322:function(e,t,r){r.d(t,{Z:function(){return a}});let a=(0,r(8755).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},1671:function(e,t,r){r.d(t,{Z:function(){return a}});let a=(0,r(8755).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},3417:function(e,t,r){r.d(t,{Z:function(){return a}});let a=(0,r(8755).Z)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]])},9376:function(e,t,r){var a=r(5475);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},6256:function(e,t,r){r.d(t,{B:function(){return u}});var a=r(7437),n=r(2265),s=r(757),o=r(6334),l=r(1671);let i=(0,r(8755).Z)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);var c=r(9322),d=r(3448);function u(e){let{evaluation:t,onSubmit:r,isSubmitting:u,userRole:m,targetName:h}=e,[x,p]=(0,n.useState)(0),[f,g]=(0,n.useState)(""),[y,b]=(0,n.useState)(0);return t?(0,a.jsxs)(s.Z,{className:"overflow-hidden border-none shadow-lg rounded-2xl p-0",children:[(0,a.jsxs)("div",{className:"bg-[#1E3A5F] text-white p-5 text-center",children:[(0,a.jsx)("h3",{className:"font-bold text-lg mb-1",children:"評価完了"}),(0,a.jsx)("p",{className:"text-xs opacity-80",children:"Thank you for your feedback!"})]}),(0,a.jsxs)("div",{className:"p-6 space-y-6 bg-white",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-2",children:(0,a.jsx)(l.Z,{className:"w-8 h-8 text-green-600"})}),(0,a.jsx)("h4",{className:"font-bold text-xl text-gray-800",children:"送信済み"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[h," への評価を送信しました。",(0,a.jsx)("br",{}),"ご協力ありがとうございました。"]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-xl space-y-3 border border-gray-100",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Score"}),(0,a.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[[1,2,3,4,5].map(e=>(0,a.jsx)(i,{className:(0,d.cn)("w-6 h-6 fill-current transition-colors",e<=t.score?"text-amber-400":"text-gray-200")},e)),(0,a.jsxs)("span",{className:"ml-2 font-bold text-lg text-gray-700",children:[t.score,".0"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Comment"}),(0,a.jsx)("p",{className:"text-sm text-gray-700 mt-1 whitespace-pre-wrap leading-relaxed",children:t.comment})]})]})]})]}):(0,a.jsxs)(s.Z,{className:"overflow-hidden border-none shadow-lg rounded-2xl p-0",children:[(0,a.jsxs)("div",{className:"bg-[#1E3A5F] text-white p-5 text-center",children:[(0,a.jsx)("h3",{className:"font-bold text-lg mb-1",children:"インターンシップ評価"}),(0,a.jsx)("p",{className:"text-xs opacity-80",children:"student"===m?"企業へのフィードバックをお願いします":"学生への最終評価を入力してください"})]}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r(x,f)},className:"p-6 space-y-6 bg-white",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"総合評価 (Score)"}),(0,a.jsx)("div",{className:"flex justify-center gap-2",children:[1,2,3,4,5].map(e=>(0,a.jsx)("button",{type:"button",className:"focus:outline-none transition-transform hover:scale-110 active:scale-95",onMouseEnter:()=>b(e),onMouseLeave:()=>b(0),onClick:()=>p(e),children:(0,a.jsx)(i,{className:(0,d.cn)("w-6 h-6 fill-current transition-colors duration-200",e<=(y||x)?"text-amber-400":"text-gray-200")})},e))}),(0,a.jsx)("p",{className:"text-sm text-amber-600 font-medium h-5 mt-2 transition-opacity duration-200",children:5===y||5===x?"非常に素晴らしい":4===y||4===x?"満足している":3===y||3===x?"普通":2===y||2===x?"改善の余地あり":1===y||1===x?"不満がある":""})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"コメント・フィードバック"}),(0,a.jsx)("textarea",{className:"w-full border-2 border-gray-100 rounded-xl p-4 min-h-[120px] focus:border-[#1E3A5F] focus:ring-0 transition-colors text-sm resize-none bg-gray-50 focus:bg-white",value:f,onChange:e=>g(e.target.value),required:!0,placeholder:"student"===m?"学んだこと、良かった点、改善点など...":"学生の成果、取り組み姿勢へのメッセージ..."})]})]}),(0,a.jsxs)("div",{className:"pt-2",children:[0===x?(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 text-amber-600 text-xs bg-amber-50 p-3 rounded-lg border border-amber-100 mb-4",children:[(0,a.jsx)(c.Z,{size:14}),(0,a.jsx)("span",{children:"評価スコアを選択してください"})]}):null,(0,a.jsx)(o.z,{type:"submit",className:"w-full py-6 font-bold text-lg shadow-md hover:shadow-lg transition-all",isLoading:u,disabled:0===x||!f.trim(),children:"評価を送信する"}),(0,a.jsx)("p",{className:"text-xs text-center text-gray-400 mt-3",children:"※ 送信後の変更はできません"})]})]})]})}},8711:function(e,t,r){r.d(t,{C:function(){return o}});var a=r(7437),n=r(2265),s=r(3448);let o=(0,n.forwardRef)((e,t)=>{let{className:r,variant:n="default",...o}=e;return(0,a.jsx)("span",{ref:t,className:(0,s.cn)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium transition-colors",{default:"bg-[#1E3A5F]/10 text-[#161B33]",success:"bg-[#48BB78]/10 text-[#48BB78]",warning:"bg-[#ED8936]/10 text-[#ED8936]",error:"bg-[#F56565]/10 text-[#F56565]",outline:"border border-gray-200 text-gray-500"}[n],r),...o})});o.displayName="Badge"},6334:function(e,t,r){r.d(t,{z:function(){return l}});var a=r(7437),n=r(2265),s=r(3448),o=r(1817);let l=(0,n.forwardRef)((e,t)=>{let{className:r,variant:n="primary",size:l="md",isLoading:i,children:c,disabled:d,...u}=e;return(0,a.jsxs)("button",{ref:t,className:(0,s.cn)("inline-flex items-center justify-center rounded-lg font-medium transition-all focus:outline-none focus:ring-2 focus:ring-[#1E3A5F]/50 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-gradient-to-r from-[#161B33] to-[#142841] text-white shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all duration-300 border border-white/10",secondary:"glass-button text-[#1E3A5F] bg-white/40 hover:bg-white/60",outline:"glass-button border border-[#1E3A5F]/30 text-[#1E3A5F] hover:bg-[#1E3A5F]/5",ghost:"text-[#1E3A5F] hover:bg-[#1E3A5F]/10",danger:"glass-button bg-gradient-to-r from-[#F56565] to-[#E53E3E] text-white border-0"}[n],{sm:"h-8 px-3 text-sm",md:"h-10 px-4 py-2",lg:"h-12 px-6 text-lg"}[l],r),disabled:d||i,...u,children:[i&&(0,a.jsx)(o.Z,{className:"mr-2 h-4 w-4 animate-spin"}),c]})});l.displayName="Button"},757:function(e,t,r){r.d(t,{Z:function(){return o}});var a=r(7437),n=r(2265),s=r(3448);let o=(0,n.forwardRef)((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("glass rounded-2xl p-6 transition-all duration-300",r),...n})});o.displayName="Card"},4362:function(e,t,r){r.d(t,{AuthProvider:function(){return d},a:function(){return u}});var a=r(7437),n=r(2265),s=r(1466),o=r(6943),l=r(6410),i=r(9376);let c=(0,n.createContext)({user:null,firebaseUser:null,loading:!0,emailVerified:!1,logout:async()=>{},refreshUser:async()=>{}});function d(e){let{children:t}=e,[r,d]=(0,n.useState)(null),[u,m]=(0,n.useState)(null),[h,x]=(0,n.useState)(!0),[p,f]=(0,n.useState)(!1),g=(0,i.useRouter)(),y=async e=>{try{let t=await (0,o.getDoc)((0,o.doc)(l.db,"users",e.uid));t.exists()?d({id:t.id,...t.data()}):d(null)}catch(e){console.error("Error fetching user data:",e),d(null)}};(0,n.useEffect)(()=>{let e=(0,s.Aj)(l.I,async e=>{m(e),e?(f(e.emailVerified),await y(e)):(d(null),f(!1)),x(!1)});return()=>e()},[]);let b=async()=>{await (0,s.w7)(l.I),d(null),m(null),f(!1),g.push("/login")},w=async()=>{let e=l.I.currentUser;e&&(await e.reload(),f(e.emailVerified),await y(e))};return(0,a.jsx)(c.Provider,{value:{user:r,firebaseUser:u,loading:h,emailVerified:p,logout:b,refreshUser:w},children:t})}let u=()=>(0,n.useContext)(c)},6410:function(e,t,r){r.d(t,{I:function(){return l},V:function(){return c},db:function(){return i}});var a=r(738),n=r(1466),s=r(6943);let o=0===(0,a.C6)().length?(0,a.ZF)({apiKey:"AIzaSyDL2GylAt2YVRSstEpp4hucbcqw7RuVk4o",authDomain:"internship-matching-app.firebaseapp.com",projectId:"internship-matching-app",messagingSenderId:"299078518812",appId:"1:299078518812:web:03ad34bb4323c497a677d9"}):(0,a.C6)()[0],l=(0,n.v0)(o),i=(0,s.ad)(o),c=new n.hJ},3448:function(e,t,r){r.d(t,{cn:function(){return s}});var a=r(1994),n=r(3335);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,a.W)(t))}},4279:function(e,t,r){r.d(t,{i:function(){return o}});var a=r(6410),n=r(6943);class s{async createReport(e,t,r,s,o,l){try{return(await (0,n.ET)((0,n.hJ)(a.db,"dailyReports"),{matchId:t,studentId:e,date:n.EK.fromDate(l),content:r,learning:s,nextGoals:o,createdAt:(0,n.Bt)(),updatedAt:(0,n.Bt)()})).id}catch(e){throw console.error("createReport error:",e),e}}async getReports(e){try{try{let t=(0,n.IO)((0,n.hJ)(a.db,"dailyReports"),(0,n.ar)("matchId","==",e),(0,n.Xo)("date","desc"));return(await (0,n.PL)(t)).docs.map(e=>({id:e.id,...e.data()}))}catch(r){var t;if("failed-precondition"===r.code||(null===(t=r.message)||void 0===t?void 0:t.includes("index"))){console.warn("Index missing for getReports, falling back to client-side sort");let t=(0,n.IO)((0,n.hJ)(a.db,"dailyReports"),(0,n.ar)("matchId","==",e));return(await (0,n.PL)(t)).docs.map(e=>({id:e.id,...e.data()})).sort((e,t)=>{var r,a;let n=(null===(r=e.date)||void 0===r?void 0:r.toMillis)?e.date.toMillis():e.date instanceof Date?e.date.getTime():0;return((null===(a=t.date)||void 0===a?void 0:a.toMillis)?t.date.toMillis():t.date instanceof Date?t.date.getTime():0)-n})}throw r}}catch(e){throw console.error("getReports error:",e),e}}async addCompanyComment(e,t){try{let r=(0,n.doc)(a.db,"dailyReports",e);await (0,n.r7)(r,{companyComment:t,updatedAt:(0,n.Bt)()})}catch(e){throw console.error("addCompanyComment error:",e),e}}async getMatch(e){try{let t=await (0,n.getDoc)((0,n.doc)(a.db,"matches",e));if(t.exists())return{id:t.id,...t.data()};return null}catch(e){throw console.error("getMatch error:",e),e}}async completeInternship(e){try{await (0,n.r7)((0,n.doc)(a.db,"matches",e),{status:"completed",endDate:(0,n.Bt)()})}catch(e){throw console.error("completeInternship error:",e),e}}async submitEvaluation(e,t,r,s,o){try{await (0,n.ET)((0,n.hJ)(a.db,"evaluations"),{matchId:e,fromId:t,toId:r,score:s,comment:o,createdAt:(0,n.Bt)()})}catch(e){throw console.error("submitEvaluation error:",e),e}}async getEvaluation(e,t){try{let r=(0,n.IO)((0,n.hJ)(a.db,"evaluations"),(0,n.ar)("matchId","==",e),(0,n.ar)("fromId","==",t)),s=await (0,n.PL)(r);if(!s.empty)return{id:s.docs[0].id,...s.docs[0].data()};return null}catch(e){throw console.error("getEvaluation error:",e),e}}}let o=new s}}]);