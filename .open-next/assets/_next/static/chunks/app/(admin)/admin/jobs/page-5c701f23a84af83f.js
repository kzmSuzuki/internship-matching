(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[123],{5163:function(e,t,a){Promise.resolve().then(a.bind(a,6427))},1047:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(8755).Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},3774:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(8755).Z)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},6427:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return h}});var n=a(7437),s=a(2265),i=a(3880),r=a(757),l=a(6334),d=a(8711),c=a(1817),o=a(3774),u=a(1047);let p=(0,a(8755).Z)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var m=a(7735),x=a(3008);function h(){let[e,t]=(0,s.useState)([]),[a,h]=(0,s.useState)(!0),[f,g]=(0,s.useState)(null),[b,y]=(0,s.useState)(null),j=async()=>{h(!0);try{let e=await i.d.getPendingJobs();t(e)}catch(e){console.error(e)}finally{h(!1)}};(0,s.useEffect)(()=>{j()},[]);let v=async e=>{if(confirm("この求人を承認して公開しますか？")){y(e);try{await i.d.approveJob(e),t(t=>t.filter(t=>t.id!==e)),g(null)}catch(e){console.error(e),alert("承認に失敗しました")}finally{y(null)}}},w=async e=>{if(confirm("この求人を差し戻しますか？（下書き状態に戻ります）")){y(e);try{await i.d.rejectJob(e),t(t=>t.filter(t=>t.id!==e)),g(null)}catch(e){console.error(e),alert("差し戻しに失敗しました")}finally{y(null)}}};return a?(0,n.jsx)("div",{className:"flex justify-center p-12",children:(0,n.jsx)(c.Z,{className:"animate-spin"})}):(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"求人承認"}),(0,n.jsxs)("p",{className:"text-gray-500",children:["承認待ちの求人が ",e.length," 件あります"]})]}),0===e.length?(0,n.jsx)(r.Z,{className:"p-12 text-center text-gray-500",children:"承認待ちの求人はありません。"}):(0,n.jsx)("div",{className:"grid gap-4",children:e.map(e=>(0,n.jsx)(r.Z,{className:"p-6",children:(0,n.jsxs)("div",{className:"flex justify-between items-start",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,n.jsx)(d.C,{variant:"warning",children:"承認待ち"}),(0,n.jsxs)("span",{className:"text-sm text-gray-500",children:["ID: ",e.id]})]}),(0,n.jsx)("h3",{className:"text-xl font-bold mb-2",children:e.title}),(0,n.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-4",children:[(0,n.jsxs)("span",{className:"flex items-center gap-1",children:[(0,n.jsx)(o.Z,{size:14})," ",e.location]}),(0,n.jsxs)("span",{className:"flex items-center gap-1",children:[(0,n.jsx)(u.Z,{size:14})," Created: ",(0,m.WU)(e.createdAt.toDate(),"yyyy/MM/dd HH:mm")]})]}),(0,n.jsx)("div",{className:"flex gap-2 mb-2",children:e.requirements.map((e,t)=>(0,n.jsx)(d.C,{variant:"outline",className:"bg-gray-50",children:e},t))})]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(l.z,{variant:"outline",onClick:()=>g(e),children:"詳細確認"}),(0,n.jsx)(l.z,{className:"bg-green-600 hover:bg-green-700",isLoading:b===e.id,onClick:()=>v(e.id),children:"承認"})]})]})},e.id))}),(0,n.jsx)(x.u,{isOpen:!!f,onClose:()=>g(null),title:"求人詳細",children:f&&(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-xl font-bold mb-2",children:f.title}),(0,n.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,n.jsx)(d.C,{variant:"warning",children:"承認待ち"}),(0,n.jsxs)("span",{className:"text-xs text-gray-400 self-center",children:["Company ID: ",f.companyId]})]})]}),(0,n.jsx)("div",{className:"space-y-4",children:(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-xs text-gray-500 block mb-1",children:"募集内容"}),(0,n.jsx)("div",{className:"p-4 bg-gray-50 rounded-lg whitespace-pre-wrap text-sm",children:f.content}),f.pdfFileId&&(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsxs)("a",{href:"/api/pdf/".concat(f.pdfFileId),target:"_blank",className:"text-blue-600 text-sm hover:underline flex items-center gap-1",children:[(0,n.jsx)(p,{size:14})," PDFを確認する"]})})]})}),(0,n.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[(0,n.jsx)(l.z,{variant:"danger",onClick:()=>w(f.id),isLoading:b===f.id,children:"差し戻し"}),(0,n.jsx)(l.z,{className:"bg-green-600 hover:bg-green-700",onClick:()=>v(f.id),isLoading:b===f.id,children:"承認して公開"})]})]})})]})}},8711:function(e,t,a){"use strict";a.d(t,{C:function(){return r}});var n=a(7437),s=a(2265),i=a(3448);let r=(0,s.forwardRef)((e,t)=>{let{className:a,variant:s="default",...r}=e;return(0,n.jsx)("span",{ref:t,className:(0,i.cn)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium transition-colors",{default:"bg-[#1E3A5F]/10 text-[#161B33]",success:"bg-[#48BB78]/10 text-[#48BB78]",warning:"bg-[#ED8936]/10 text-[#ED8936]",error:"bg-[#F56565]/10 text-[#F56565]",outline:"border border-gray-200 text-gray-500"}[s],a),...r})});r.displayName="Badge"},6334:function(e,t,a){"use strict";a.d(t,{z:function(){return l}});var n=a(7437),s=a(2265),i=a(3448),r=a(1817);let l=(0,s.forwardRef)((e,t)=>{let{className:a,variant:s="primary",size:l="md",isLoading:d,children:c,disabled:o,...u}=e;return(0,n.jsxs)("button",{ref:t,className:(0,i.cn)("inline-flex items-center justify-center rounded-lg font-medium transition-all focus:outline-none focus:ring-2 focus:ring-[#1E3A5F]/50 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-gradient-to-r from-[#161B33] to-[#142841] text-white shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all duration-300 border border-white/10",secondary:"glass-button text-[#1E3A5F] bg-white/40 hover:bg-white/60",outline:"glass-button border border-[#1E3A5F]/30 text-[#1E3A5F] hover:bg-[#1E3A5F]/5",ghost:"text-[#1E3A5F] hover:bg-[#1E3A5F]/10",danger:"glass-button bg-gradient-to-r from-[#F56565] to-[#E53E3E] text-white border-0"}[s],{sm:"h-8 px-3 text-sm",md:"h-10 px-4 py-2",lg:"h-12 px-6 text-lg"}[l],a),disabled:o||d,...u,children:[d&&(0,n.jsx)(r.Z,{className:"mr-2 h-4 w-4 animate-spin"}),c]})});l.displayName="Button"},757:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var n=a(7437),s=a(2265),i=a(3448);let r=(0,s.forwardRef)((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("glass rounded-2xl p-6 transition-all duration-300",a),...s})});r.displayName="Card"},3008:function(e,t,a){"use strict";a.d(t,{u:function(){return d}});var n=a(7437),s=a(2265),i=a(4887);let r=(0,a(8755).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var l=a(3448);function d(e){let{isOpen:t,onClose:a,title:d,children:c,className:o}=e;return((0,s.useEffect)(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),t)?(0,i.createPortal)((0,n.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6 bg-black/40 backdrop-blur-sm animate-in fade-in duration-200",children:(0,n.jsxs)("div",{className:(0,l.cn)("relative w-full max-w-lg transform rounded-2xl bg-white/80 backdrop-blur-2xl p-6 text-left align-middle shadow-2xl transition-all animate-in zoom-in-95 duration-200 border border-white/40",o),children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[d&&(0,n.jsx)("h3",{className:"text-lg font-medium leading-6 text-[#161B33]",children:d}),(0,n.jsx)("button",{onClick:a,className:"rounded-full p-1 hover:bg-gray-100 transition-colors",children:(0,n.jsx)(r,{className:"h-5 w-5 text-gray-500"})})]}),(0,n.jsx)("div",{children:c})]})}),document.body):null}},6410:function(e,t,a){"use strict";a.d(t,{I:function(){return l},V:function(){return c},db:function(){return d}});var n=a(738),s=a(1466),i=a(6943);let r=0===(0,n.C6)().length?(0,n.ZF)({apiKey:"AIzaSyDL2GylAt2YVRSstEpp4hucbcqw7RuVk4o",authDomain:"internship-matching-app.firebaseapp.com",projectId:"internship-matching-app",messagingSenderId:"299078518812",appId:"1:299078518812:web:03ad34bb4323c497a677d9"}):(0,n.C6)()[0],l=(0,s.v0)(r),d=(0,i.ad)(r),c=new s.hJ},3448:function(e,t,a){"use strict";a.d(t,{cn:function(){return i}});var n=a(1994),s=a(3335);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.m6)((0,n.W)(t))}},3880:function(e,t,a){"use strict";a.d(t,{d:function(){return r}});var n=a(6410),s=a(6943);class i{async getStats(){try{let e=(0,s.hJ)(n.db,"users"),t=(0,s.hJ)(n.db,"companies"),a=(0,s.hJ)(n.db,"jobPostings"),i=(0,s.hJ)(n.db,"applications"),r=(0,s.hJ)(n.db,"matches"),l=await (0,s.Yp)(e),d=await (0,s.Yp)(t),c=await (0,s.Yp)((0,s.IO)(a,(0,s.ar)("status","==","pending_approval"))),o=await (0,s.Yp)((0,s.IO)(a,(0,s.ar)("status","==","published"))),u=await (0,s.Yp)((0,s.IO)(i,(0,s.ar)("status","==","pending_admin"))),p=await (0,s.Yp)(r);return{totalUsers:l.data().count,totalCompanies:d.data().count,pendingJobs:c.data().count,activeJobs:o.data().count,pendingApplications:u.data().count,totalMatches:p.data().count}}catch(e){throw console.error("AdminService.getStats error:",e),e}}async getPendingJobs(){let e=(0,s.IO)((0,s.hJ)(n.db,"jobPostings"),(0,s.ar)("status","==","pending_approval"),(0,s.Xo)("createdAt","asc"));return(await (0,s.PL)(e)).docs.map(e=>({id:e.id,...e.data()}))}async approveJob(e){await (0,s.r7)((0,s.JU)(n.db,"jobPostings",e),{status:"published",updatedAt:(0,s.Bt)()})}async rejectJob(e){await (0,s.r7)((0,s.JU)(n.db,"jobPostings",e),{status:"draft",updatedAt:(0,s.Bt)()})}async getPendingApplications(){let e=(0,s.IO)((0,s.hJ)(n.db,"applications"),(0,s.ar)("status","==","pending_admin"),(0,s.Xo)("createdAt","asc"));return(await (0,s.PL)(e)).docs.map(e=>({id:e.id,...e.data()}))}async getApplicationDetails(e){let t=await (0,s.QT)((0,s.JU)(n.db,"jobPostings",e.jobId)),a=await (0,s.QT)((0,s.JU)(n.db,"students",e.studentId)),i=await (0,s.QT)((0,s.JU)(n.db,"companies",e.companyId));return{job:t.exists()?t.data():null,student:a.exists()?a.data():null,company:i.exists()?i.data():null}}async approveApplication(e){}async getAllCompanies(){return(await (0,s.PL)((0,s.hJ)(n.db,"companies"))).docs.map(e=>({...e.data()}))}}let r=new i}},function(e){e.O(0,[287,483,137,442,94,814,971,117,744],function(){return e(e.s=5163)}),_N_E=e.O()}]);