(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8552],{6702:function(e,t,s){Promise.resolve().then(s.bind(s,9663))},6362:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(8755).Z)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},8930:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(8755).Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},2369:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(8755).Z)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},9663:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var r=s(7437),a=s(2265),n=s(6943),l=s(6410),i=s(757),d=s(6334),c=s(8711),o=s(3008),u=s(1817),x=s(2369),m=s(6362),h=s(8930),f=s(6424);function g(){var e;let[t,s]=(0,a.useState)([]),[g,p]=(0,a.useState)(!0),[b,v]=(0,a.useState)(null),[y,j]=(0,a.useState)("");(0,a.useEffect)(()=>{!async function(){try{let e=(0,n.IO)((0,n.hJ)(l.db,"students")),t=await (0,n.PL)(e),r=await Promise.all(t.docs.map(async e=>{let t={userId:e.id,...e.data()};try{let e=await (0,n.getDoc)((0,n.doc)(l.db,"users",t.userId));if(e.exists()){let s=e.data();t.email=s.email,t.createdAt=s.createdAt,t.role=s.role}}catch(e){console.warn(e)}return t}));r.sort((e,t)=>e.createdAt&&t.createdAt?t.createdAt.toMillis()-e.createdAt.toMillis():0),s(r)}catch(e){console.error("Error fetching students:",e)}finally{p(!1)}}()},[]);let N=async e=>{if(confirm("このユーザーを削除してもよろしいですか？取り消せません。"))try{await (0,n.oe)((0,n.doc)(l.db,"students",e)),await (0,n.oe)((0,n.doc)(l.db,"users",e)),s(t=>t.filter(t=>t.userId!==e)),v(null)}catch(e){console.error(e),alert("削除に失敗しました")}},w=async(e,t)=>{if(confirm('ユーザーのロールを "'.concat(t,'" に変更しますか？\n権限が即座に変更されます。')))try{await (0,n.r7)((0,n.doc)(l.db,"users",e),{role:t}),s(s=>s.map(s=>s.userId===e?{...s,role:t}:s)),(null==b?void 0:b.userId)===e&&v(e=>e?{...e,role:t}:null),alert("ロールを変更しました")}catch(e){console.error(e),alert("変更に失敗しました")}},k=t.filter(e=>{var t,s;if(!y)return!0;let r=y.toLowerCase(),a=(null===(t=e.name)||void 0===t?void 0:t.toLowerCase())||"",n=(null===(s=e.university)||void 0===s?void 0:s.toLowerCase())||"";return a.includes(r)||n.includes(r)});return g?(0,r.jsx)("div",{className:"flex justify-center p-12",children:(0,r.jsx)(u.Z,{className:"animate-spin text-[#1E3A5F]"})}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-[#1E3A5F]",children:"登録学生一覧"}),(0,r.jsx)("p",{className:"text-gray-500",children:"プラットフォームに登録されている全学生ユーザー"})]}),(0,r.jsx)("input",{type:"text",placeholder:"名前・大学名で検索...",className:"border border-gray-300 rounded-lg px-4 py-2 text-sm w-full md:w-64 focus:outline-none focus:ring-2 focus:ring-[#1E3A5F]",value:y,onChange:e=>j(e.target.value)})]}),0===k.length?(0,r.jsx)(i.Z,{className:"p-12 text-center text-gray-500",children:(0,r.jsx)("p",{children:"条件に一致する学生はいません。"})}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:k.map(e=>{var t;return(0,r.jsxs)(i.Z,{className:"p-6 flex flex-col h-full hover:shadow-lg transition-shadow",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-bold text-xl",children:e.name?e.name.charAt(0):(0,r.jsx)(x.Z,{})}),(0,r.jsxs)("div",{className:"overflow-hidden",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-[#1E3A5F] truncate",children:e.name||"No Name"}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 truncate",children:[e.university," ",e.grade]})]})]}),(0,r.jsxs)("div",{className:"flex-1 space-y-3 mb-4",children:[(0,r.jsx)("div",{className:"text-xs text-gray-600 mb-2 truncate",children:e.email||"Email不明"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-1",children:null===(t=e.skills)||void 0===t?void 0:t.slice(0,5).map((e,t)=>(0,r.jsx)(c.C,{variant:"outline",className:"text-xs bg-gray-50",children:e},t))})]}),(0,r.jsxs)("div",{className:"text-xs text-gray-400 mb-4",children:["登録日: ",e.createdAt?(0,f.WU)(e.createdAt.toDate(),"yyyy/MM/dd"):"-"]}),(0,r.jsx)("div",{className:"mt-auto pt-4 border-t",children:(0,r.jsx)(d.z,{variant:"outline",className:"w-full",onClick:()=>v(e),children:"詳細を確認"})})]},e.userId)})}),(0,r.jsx)(o.u,{isOpen:!!b,onClose:()=>v(null),title:"学生プロフィール詳細",children:b&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"w-16 h-16 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-bold text-2xl",children:b.name?b.name.charAt(0):(0,r.jsx)(x.Z,{})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-[#1E3A5F]",children:b.name}),(0,r.jsx)("p",{className:"text-gray-500",children:b.email}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[b.university," ",b.grade]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-bold text-gray-700 mb-2",children:"自己紹介 / BIO"}),(0,r.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg text-sm whitespace-pre-wrap leading-relaxed",children:b.bio||"未入力"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-bold text-gray-700 mb-2",children:"スキル"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:null===(e=b.skills)||void 0===e?void 0:e.map((e,t)=>(0,r.jsx)(c.C,{variant:"outline",className:"bg-white",children:e},t))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-bold text-gray-700 mb-2",children:"リンク / ポートフォリオ"}),b.links&&b.links.length>0?(0,r.jsx)("ul",{className:"space-y-2",children:b.links.map((e,t)=>(0,r.jsxs)("li",{className:"flex items-center gap-2",children:[(0,r.jsx)(m.Z,{size:14,className:"text-blue-500"}),(0,r.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-sm truncate max-w-full block",children:e})]},t))}):(0,r.jsx)("p",{className:"text-sm text-gray-400",children:"リンクはありません"})]}),(0,r.jsxs)("div",{className:"pt-4 border-t text-xs text-gray-400 text-right",children:["User ID: ",b.userId]}),(0,r.jsxs)("div",{className:"pt-4 border-t bg-gray-50 p-4 rounded-lg",children:[(0,r.jsx)("h3",{className:"text-sm font-bold text-[#1E3A5F] mb-2",children:"ロール変更 (管理者機能)"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("select",{className:"border border-gray-300 rounded px-2 py-1 text-sm bg-white",value:b.role||"student",onChange:e=>w(b.userId,e.target.value),children:[(0,r.jsx)("option",{value:"student",children:"Student (学生)"}),(0,r.jsx)("option",{value:"company",children:"Company (企業)"}),(0,r.jsx)("option",{value:"admin",children:"Admin (管理者)"})]}),(0,r.jsx)("span",{className:"text-xs text-red-500",children:"※慎重に操作してください"})]})]}),(0,r.jsxs)("div",{className:"flex justify-between pt-2",children:[(0,r.jsxs)(d.z,{variant:"ghost",className:"text-red-500 hover:bg-red-50 hover:text-red-600",onClick:()=>N(b.userId),children:[(0,r.jsx)(h.Z,{size:16,className:"mr-2"})," 削除"]}),(0,r.jsx)(d.z,{variant:"secondary",onClick:()=>v(null),children:"閉じる"})]})]})})]})}},8711:function(e,t,s){"use strict";s.d(t,{C:function(){return l}});var r=s(7437),a=s(2265),n=s(3448);let l=(0,a.forwardRef)((e,t)=>{let{className:s,variant:a="default",...l}=e;return(0,r.jsx)("span",{ref:t,className:(0,n.cn)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium transition-colors",{default:"bg-[#1E3A5F]/10 text-[#161B33]",success:"bg-[#48BB78]/10 text-[#48BB78]",warning:"bg-[#ED8936]/10 text-[#ED8936]",error:"bg-[#F56565]/10 text-[#F56565]",outline:"border border-gray-200 text-gray-500"}[a],s),...l})});l.displayName="Badge"},6334:function(e,t,s){"use strict";s.d(t,{z:function(){return i}});var r=s(7437),a=s(2265),n=s(3448),l=s(1817);let i=(0,a.forwardRef)((e,t)=>{let{className:s,variant:a="primary",size:i="md",isLoading:d,children:c,disabled:o,...u}=e;return(0,r.jsxs)("button",{ref:t,className:(0,n.cn)("inline-flex items-center justify-center rounded-lg font-medium transition-all focus:outline-none focus:ring-2 focus:ring-[#1E3A5F]/50 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-gradient-to-r from-[#161B33] to-[#142841] text-white shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all duration-300 border border-white/10",secondary:"glass-button text-[#1E3A5F] bg-white/40 hover:bg-white/60",outline:"glass-button border border-[#1E3A5F]/30 text-[#1E3A5F] hover:bg-[#1E3A5F]/5",ghost:"text-[#1E3A5F] hover:bg-[#1E3A5F]/10",danger:"glass-button bg-gradient-to-r from-[#F56565] to-[#E53E3E] text-white border-0"}[a],{sm:"h-8 px-3 text-sm",md:"h-10 px-4 py-2",lg:"h-12 px-6 text-lg"}[i],s),disabled:o||d,...u,children:[d&&(0,r.jsx)(l.Z,{className:"mr-2 h-4 w-4 animate-spin"}),c]})});i.displayName="Button"},757:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var r=s(7437),a=s(2265),n=s(3448);let l=(0,a.forwardRef)((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("glass rounded-2xl p-6 transition-all duration-300",s),...a})});l.displayName="Card"},3008:function(e,t,s){"use strict";s.d(t,{u:function(){return d}});var r=s(7437),a=s(2265),n=s(4887);let l=(0,s(8755).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var i=s(3448);function d(e){let{isOpen:t,onClose:s,title:d,children:c,className:o}=e;return((0,a.useEffect)(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),t)?(0,n.createPortal)((0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6 bg-black/40 backdrop-blur-sm animate-in fade-in duration-200",children:(0,r.jsxs)("div",{className:(0,i.cn)("relative w-full max-w-lg transform rounded-2xl bg-white/80 backdrop-blur-2xl p-6 text-left align-middle shadow-2xl transition-all animate-in zoom-in-95 duration-200 border border-white/40",o),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[d&&(0,r.jsx)("h3",{className:"text-lg font-medium leading-6 text-[#161B33]",children:d}),(0,r.jsx)("button",{onClick:s,className:"rounded-full p-1 hover:bg-gray-100 transition-colors",children:(0,r.jsx)(l,{className:"h-5 w-5 text-gray-500"})})]}),(0,r.jsx)("div",{children:c})]})}),document.body):null}},6410:function(e,t,s){"use strict";s.d(t,{I:function(){return i},V:function(){return c},db:function(){return d}});var r=s(738),a=s(1466),n=s(6943);let l=0===(0,r.C6)().length?(0,r.ZF)({apiKey:"AIzaSyDL2GylAt2YVRSstEpp4hucbcqw7RuVk4o",authDomain:"internship-matching-app.firebaseapp.com",projectId:"internship-matching-app",messagingSenderId:"299078518812",appId:"1:299078518812:web:03ad34bb4323c497a677d9"}):(0,r.C6)()[0],i=(0,a.v0)(l),d=(0,n.ad)(l),c=new a.hJ},3448:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var r=s(1994),a=s(3335);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}}},function(e){e.O(0,[287,8483,1442,8697,6165,2971,2117,1744],function(){return e(e.s=6702)}),_N_E=e.O()}]);