(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7463],{7167:function(t,e,a){Promise.resolve().then(a.bind(a,1720))},2660:function(t,e,a){"use strict";a.d(e,{Z:function(){return s}});let s=(0,a(8755).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},44:function(t,e,a){"use strict";a.d(e,{Z:function(){return s}});let s=(0,a(8755).Z)("building",[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]])},1047:function(t,e,a){"use strict";a.d(e,{Z:function(){return s}});let s=(0,a(8755).Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},1671:function(t,e,a){"use strict";a.d(e,{Z:function(){return s}});let s=(0,a(8755).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},8736:function(t,e,a){"use strict";a.d(e,{Z:function(){return s}});let s=(0,a(8755).Z)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},2369:function(t,e,a){"use strict";a.d(e,{Z:function(){return s}});let s=(0,a(8755).Z)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},9376:function(t,e,a){"use strict";var s=a(5475);a.o(s,"useParams")&&a.d(e,{useParams:function(){return s.useParams}}),a.o(s,"usePathname")&&a.d(e,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(e,{useRouter:function(){return s.useRouter}})},1720:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return f}});var s=a(7437),r=a(2265),n=a(9376),i=a(3880),d=a(4279),o=a(757),c=a(6334),l=a(8711),u=a(1817),p=a(2660),m=a(8736),h=a(1671),x=a(2369),b=a(44),y=a(1047),g=a(6424);function f(){let{id:t}=(0,n.useParams)(),e=(0,n.useRouter)(),[a,f]=(0,r.useState)(null),[v,w]=(0,r.useState)([]),[j,N]=(0,r.useState)([]),[A,I]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{(async function(){if(t)try{let e=await i.d.getAllMatches().then(e=>e.find(e=>e.id===t));e&&f(e);let a=await d.i.getReports(t);w(a);let s=await i.d.getMatchEvaluations(t);N(s)}catch(t){console.error("Error fetching match detail:",t)}finally{I(!1)}})()},[t]),A)?(0,s.jsx)("div",{className:"flex justify-center p-12",children:(0,s.jsx)(u.Z,{className:"animate-spin text-[#1E3A5F]"})}):a?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)(c.z,{variant:"ghost",onClick:()=>e.back(),className:"mb-4 pl-0 hover:bg-transparent hover:text-[#1E3A5F]",children:[(0,s.jsx)(p.Z,{size:16,className:"mr-2"})," 一覧に戻る"]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-2",children:[(0,s.jsx)(l.C,{variant:"active"===a.status?"success":"outline",children:"active"===a.status?"進行中":a.status}),(0,s.jsxs)("span",{className:"text-gray-500 text-sm",children:["ID: ",a.id]})]}),(0,s.jsx)("h1",{className:"text-3xl font-bold text-[#1E3A5F]",children:a.jobTitle})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,s.jsxs)(o.Z,{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)(m.Z,{className:"text-[#1E3A5F]"}),(0,s.jsx)("h2",{className:"text-xl font-bold text-[#1E3A5F]",children:"日報一覧"})]}),0===v.length?(0,s.jsx)("p",{className:"text-gray-500 text-center py-4",children:"日報はまだ提出されていません。"}):(0,s.jsx)("div",{className:"space-y-4",children:v.map(t=>(0,s.jsxs)("div",{className:"border-b last:border-0 pb-6 last:pb-0 space-y-3",children:[(0,s.jsx)("div",{className:"flex justify-between items-start",children:(0,s.jsx)("span",{className:"font-bold text-lg text-[#1E3A5F]",children:t.date&&(0,g.WU)(t.date.toDate(),"yyyy/MM/dd")})}),(0,s.jsxs)("div",{className:"grid gap-3",children:[(0,s.jsxs)("div",{className:"bg-gray-50 p-3 rounded border border-gray-100",children:[(0,s.jsx)("p",{className:"font-bold text-sm text-gray-700 mb-1",children:"業務内容"}),(0,s.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:t.content})]}),t.learning&&(0,s.jsxs)("div",{className:"bg-blue-50 p-3 rounded border border-blue-100",children:[(0,s.jsx)("p",{className:"font-bold text-sm text-blue-700 mb-1",children:"学び・気付き"}),(0,s.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:t.learning})]}),t.nextGoals&&(0,s.jsxs)("div",{className:"bg-green-50 p-3 rounded border border-green-100",children:[(0,s.jsx)("p",{className:"font-bold text-sm text-green-700 mb-1",children:"明日の目標"}),(0,s.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:t.nextGoals})]}),t.companyComment&&(0,s.jsxs)("div",{className:"bg-amber-50 p-3 rounded border border-amber-100",children:[(0,s.jsx)("p",{className:"font-bold text-sm text-amber-700 mb-1",children:"企業からのフィードバック"}),(0,s.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:t.companyComment})]})]})]},t.id))})]}),(0,s.jsxs)(o.Z,{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)(h.Z,{className:"text-[#1E3A5F]"}),(0,s.jsx)("h2",{className:"text-xl font-bold text-[#1E3A5F]",children:"評価"})]}),0===j.length?(0,s.jsx)("p",{className:"text-gray-500 text-center py-4",children:"評価はまだ行われていません。"}):(0,s.jsx)("div",{className:"space-y-4",children:j.map(t=>(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,s.jsx)("span",{className:"font-bold text-sm text-gray-500",children:t.fromId===a.companyId?"企業から学生へ":t.fromId===a.studentId?"学生から企業へ":"その他"}),(0,s.jsxs)("div",{className:"flex items-center gap-1 text-amber-500 font-bold",children:[(0,s.jsx)("span",{children:"★"}),(0,s.jsx)("span",{children:t.score})]})]}),(0,s.jsx)("p",{className:"text-sm bg-white p-3 rounded border whitespace-pre-wrap",children:t.comment})]},t.id))})]})]}),(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsxs)(o.Z,{className:"p-6",children:[(0,s.jsx)("h3",{className:"font-bold text-lg mb-4 text-[#1E3A5F]",children:"基本情報"}),(0,s.jsxs)("div",{className:"space-y-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-gray-500 text-xs block",children:"学生"}),(0,s.jsxs)("p",{className:"font-bold flex items-center gap-2",children:[(0,s.jsx)(x.Z,{size:14})," ",a.studentName]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-gray-500 text-xs block",children:"企業"}),(0,s.jsxs)("p",{className:"font-bold flex items-center gap-2",children:[(0,s.jsx)(b.Z,{size:14})," ",a.companyName]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-gray-500 text-xs block",children:"期間"}),(0,s.jsxs)("p",{className:"font-bold flex items-center gap-2",children:[(0,s.jsx)(y.Z,{size:14}),(0,g.WU)(a.startDate.toDate(),"yyyy/MM/dd")," 〜 ",a.endDate?(0,g.WU)(a.endDate.toDate(),"yyyy/MM/dd"):"未定"]})]})]})]})})]})]}):(0,s.jsx)("div",{className:"p-12 text-center",children:"マッチングが見つかりません"})}},8711:function(t,e,a){"use strict";a.d(e,{C:function(){return i}});var s=a(7437),r=a(2265),n=a(3448);let i=(0,r.forwardRef)((t,e)=>{let{className:a,variant:r="default",...i}=t;return(0,s.jsx)("span",{ref:e,className:(0,n.cn)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium transition-colors",{default:"bg-[#1E3A5F]/10 text-[#161B33]",success:"bg-[#48BB78]/10 text-[#48BB78]",warning:"bg-[#ED8936]/10 text-[#ED8936]",error:"bg-[#F56565]/10 text-[#F56565]",outline:"border border-gray-200 text-gray-500"}[r],a),...i})});i.displayName="Badge"},6334:function(t,e,a){"use strict";a.d(e,{z:function(){return d}});var s=a(7437),r=a(2265),n=a(3448),i=a(1817);let d=(0,r.forwardRef)((t,e)=>{let{className:a,variant:r="primary",size:d="md",isLoading:o,children:c,disabled:l,...u}=t;return(0,s.jsxs)("button",{ref:e,className:(0,n.cn)("inline-flex items-center justify-center rounded-lg font-medium transition-all focus:outline-none focus:ring-2 focus:ring-[#1E3A5F]/50 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-gradient-to-r from-[#161B33] to-[#142841] text-white shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all duration-300 border border-white/10",secondary:"glass-button text-[#1E3A5F] bg-white/40 hover:bg-white/60",outline:"glass-button border border-[#1E3A5F]/30 text-[#1E3A5F] hover:bg-[#1E3A5F]/5",ghost:"text-[#1E3A5F] hover:bg-[#1E3A5F]/10",danger:"glass-button bg-gradient-to-r from-[#F56565] to-[#E53E3E] text-white border-0"}[r],{sm:"h-8 px-3 text-sm",md:"h-10 px-4 py-2",lg:"h-12 px-6 text-lg"}[d],a),disabled:l||o,...u,children:[o&&(0,s.jsx)(i.Z,{className:"mr-2 h-4 w-4 animate-spin"}),c]})});d.displayName="Button"},757:function(t,e,a){"use strict";a.d(e,{Z:function(){return i}});var s=a(7437),r=a(2265),n=a(3448);let i=(0,r.forwardRef)((t,e)=>{let{className:a,...r}=t;return(0,s.jsx)("div",{ref:e,className:(0,n.cn)("glass rounded-2xl p-6 transition-all duration-300",a),...r})});i.displayName="Card"},6410:function(t,e,a){"use strict";a.d(e,{I:function(){return d},V:function(){return c},db:function(){return o}});var s=a(738),r=a(1466),n=a(6943);let i=0===(0,s.C6)().length?(0,s.ZF)({apiKey:"AIzaSyDL2GylAt2YVRSstEpp4hucbcqw7RuVk4o",authDomain:"internship-matching-app.firebaseapp.com",projectId:"internship-matching-app",messagingSenderId:"299078518812",appId:"1:299078518812:web:03ad34bb4323c497a677d9"}):(0,s.C6)()[0],d=(0,r.v0)(i),o=(0,n.ad)(i),c=new r.hJ},1677:function(t,e,a){"use strict";async function s(t,e,a){try{let s=await fetch("/api/send-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:t,subject:e,body:a})});if(!s.ok)return console.error("Failed to send email:",await s.text()),!1;return!0}catch(t){return console.error("Error sending email:",t),!1}}a.d(e,{C:function(){return s}})},3448:function(t,e,a){"use strict";a.d(e,{cn:function(){return n}});var s=a(1994),r=a(3335);function n(){for(var t=arguments.length,e=Array(t),a=0;a<t;a++)e[a]=arguments[a];return(0,r.m6)((0,s.W)(e))}},3880:function(t,e,a){"use strict";a.d(e,{d:function(){return o}});var s=a(6410),r=a(6943),n=a(1437),i=a(1677);class d{async getUserEmail(t){try{let e=await (0,r.getDoc)((0,r.doc)(s.db,"users",t));if(e.exists())return e.data().email}catch(t){console.error("Error fetching user email:",t)}return null}async getStats(){try{let t=(0,r.hJ)(s.db,"users"),e=(0,r.hJ)(s.db,"companies"),a=(0,r.hJ)(s.db,"jobPostings"),n=(0,r.hJ)(s.db,"applications"),i=(0,r.hJ)(s.db,"matches"),d=await (0,r.Yp)((0,r.IO)(t,(0,r.ar)("role","==","student"))),o=await (0,r.Yp)(e),c=await (0,r.Yp)((0,r.IO)(a,(0,r.ar)("status","==","pending_approval"))),l=await (0,r.Yp)((0,r.IO)(a,(0,r.ar)("status","==","published"))),u=await (0,r.Yp)((0,r.IO)(n,(0,r.ar)("status","==","pending_admin"))),p=await (0,r.Yp)(i),m=await (0,r.Yp)((0,r.IO)(e,(0,r.ar)("isApproved","==",!1)));return{totalUsers:d.data().count,totalCompanies:o.data().count,pendingCompanies:m.data().count,pendingJobs:c.data().count,activeJobs:l.data().count,pendingApplications:u.data().count,totalMatches:p.data().count}}catch(t){throw console.error("AdminService.getStats error:",t),t}}async getPendingJobs(){try{let t=(0,r.IO)((0,r.hJ)(s.db,"jobPostings"),(0,r.ar)("status","==","pending_approval"),(0,r.Xo)("createdAt","asc"));return(await (0,r.PL)(t)).docs.map(t=>({id:t.id,...t.data()}))}catch(e){var t;if("failed-precondition"===e.code||(null===(t=e.message)||void 0===t?void 0:t.includes("index"))){console.warn("Composite index missing for getPendingJobs, falling back to unordered query. Create the index in Firebase Console.");let t=(0,r.IO)((0,r.hJ)(s.db,"jobPostings"),(0,r.ar)("status","==","pending_approval"));return(await (0,r.PL)(t)).docs.map(t=>({id:t.id,...t.data()})).sort((t,e)=>{var a,s,r,n,i,d;return(null!==(i=null===(s=t.createdAt)||void 0===s?void 0:null===(a=s.toMillis)||void 0===a?void 0:a.call(s))&&void 0!==i?i:0)-(null!==(d=null===(n=e.createdAt)||void 0===n?void 0:null===(r=n.toMillis)||void 0===r?void 0:r.call(n))&&void 0!==d?d:0)})}throw e}}async getAllJobs(){let t=(0,r.IO)((0,r.hJ)(s.db,"jobPostings"),(0,r.Xo)("createdAt","desc"));return(await (0,r.PL)(t)).docs.map(t=>({id:t.id,...t.data()}))}async approveJob(t){let e=(0,r.doc)(s.db,"jobPostings",t),a=await (0,r.getDoc)(e);if(!a.exists())return;let d=a.data();if(await (0,r.r7)(e,{status:"published",updatedAt:(0,r.Bt)()}),null==d?void 0:d.companyId){await n.B.createNotification(d.companyId,"求人が承認されました","求人「".concat(d.title,"」が公開されました。"),"job_approved_admin","/company/jobs/".concat(t));let e=await this.getUserEmail(d.companyId);e&&await (0,i.C)(e,"【Internship Match】求人公開のお知らせ","求人「".concat(d.title,"」が承認され、公開されました。\n\nマイページから確認できます。"))}}async rejectJob(t){let e=(0,r.doc)(s.db,"jobPostings",t),a=await (0,r.getDoc)(e),d=a.exists()?a.data():null;if(await (0,r.r7)(e,{status:"draft",updatedAt:(0,r.Bt)()}),null==d?void 0:d.companyId){await n.B.createNotification(d.companyId,"求人が差し戻されました","求人「".concat(d.title,"」の内容を確認してください。"),"system","/company/jobs/".concat(t));let e=await this.getUserEmail(d.companyId);e&&await (0,i.C)(e,"【Internship Match】求人差し戻しのお知らせ","求人「".concat(d.title,"」が差し戻されました。\n理由を確認し、内容を修正してください。"))}}async getAllCompanies(){return(await (0,r.PL)((0,r.hJ)(s.db,"companies"))).docs.map(t=>({userId:t.id,...t.data()}))}async approveCompany(t){await (0,r.r7)((0,r.doc)(s.db,"companies",t),{isApproved:!0,updatedAt:(0,r.Bt)()}),await n.B.createNotification(t,"企業アカウントが承認されました","アカウント審査が完了しました。求人の作成が可能です。","system","/company/dashboard");let e=await this.getUserEmail(t);e&&await (0,i.C)(e,"【Internship Match】企業アカウント承認のお知らせ","アカウント審査が完了しました。\n本日より求人の作成が可能になります。\n\nダッシュボードにログインしてご利用を開始してください。")}async revokeCompany(t){await (0,r.r7)((0,r.doc)(s.db,"companies",t),{isApproved:!1,updatedAt:(0,r.Bt)()})}async getPendingApplications(){try{let t=(0,r.IO)((0,r.hJ)(s.db,"applications"),(0,r.ar)("status","==","pending_admin"),(0,r.Xo)("createdAt","asc"));return(await (0,r.PL)(t)).docs.map(t=>({id:t.id,...t.data()}))}catch(e){var t;if("failed-precondition"===e.code||(null===(t=e.message)||void 0===t?void 0:t.includes("index"))){console.warn("Composite index missing for getPendingApplications, falling back.");let t=(0,r.IO)((0,r.hJ)(s.db,"applications"),(0,r.ar)("status","==","pending_admin"));return(await (0,r.PL)(t)).docs.map(t=>({id:t.id,...t.data()})).sort((t,e)=>{var a,s,r,n,i,d;return(null!==(i=null===(s=t.createdAt)||void 0===s?void 0:null===(a=s.toMillis)||void 0===a?void 0:a.call(s))&&void 0!==i?i:0)-(null!==(d=null===(n=e.createdAt)||void 0===n?void 0:null===(r=n.toMillis)||void 0===r?void 0:r.call(n))&&void 0!==d?d:0)})}throw e}}async getApplicationDetails(t){let e=await (0,r.getDoc)((0,r.doc)(s.db,"jobPostings",t.jobId)),a=await (0,r.getDoc)((0,r.doc)(s.db,"students",t.studentId)),n=await (0,r.getDoc)((0,r.doc)(s.db,"companies",t.companyId));return{job:e.exists()?e.data():null,student:a.exists()?a.data():null,company:n.exists()?n.data():null}}async approveApplication(t){}async getAllMatches(){try{let t=(0,r.IO)((0,r.hJ)(s.db,"matches"),(0,r.Xo)("createdAt","desc")),e=(await (0,r.PL)(t)).docs.map(t=>({id:t.id,...t.data()}));return await Promise.all(e.map(async t=>{let e=await (0,r.getDoc)((0,r.doc)(s.db,"students",t.studentId)),a=await (0,r.getDoc)((0,r.doc)(s.db,"companies",t.companyId)),n=await (0,r.getDoc)((0,r.doc)(s.db,"jobPostings",t.jobId));return{...t,studentName:e.exists()?e.data().name:"退会済みユーザー",companyName:a.exists()?a.data().name:"不明な企業",jobTitle:n.exists()?n.data().title:"削除された求人"}}))}catch(t){throw console.error("getAllMatches error:",t),t}}async getMatchEvaluations(t){try{let e=(0,r.IO)((0,r.hJ)(s.db,"evaluations"),(0,r.ar)("matchId","==",t));return(await (0,r.PL)(e)).docs.map(t=>({id:t.id,...t.data()}))}catch(t){return console.error(t),[]}}}let o=new d},4279:function(t,e,a){"use strict";a.d(e,{i:function(){return i}});var s=a(6410),r=a(6943);class n{async createReport(t,e,a,n,i,d){try{return(await (0,r.ET)((0,r.hJ)(s.db,"dailyReports"),{matchId:e,studentId:t,date:r.EK.fromDate(d),content:a,learning:n,nextGoals:i,createdAt:(0,r.Bt)(),updatedAt:(0,r.Bt)()})).id}catch(t){throw console.error("createReport error:",t),t}}async getReports(t){try{try{let e=(0,r.IO)((0,r.hJ)(s.db,"dailyReports"),(0,r.ar)("matchId","==",t),(0,r.Xo)("date","desc"));return(await (0,r.PL)(e)).docs.map(t=>({id:t.id,...t.data()}))}catch(a){var e;if("failed-precondition"===a.code||(null===(e=a.message)||void 0===e?void 0:e.includes("index"))){console.warn("Index missing for getReports, falling back to client-side sort");let e=(0,r.IO)((0,r.hJ)(s.db,"dailyReports"),(0,r.ar)("matchId","==",t));return(await (0,r.PL)(e)).docs.map(t=>({id:t.id,...t.data()})).sort((t,e)=>{var a,s;let r=(null===(a=t.date)||void 0===a?void 0:a.toMillis)?t.date.toMillis():t.date instanceof Date?t.date.getTime():0;return((null===(s=e.date)||void 0===s?void 0:s.toMillis)?e.date.toMillis():e.date instanceof Date?e.date.getTime():0)-r})}throw a}}catch(t){throw console.error("getReports error:",t),t}}async addCompanyComment(t,e){try{let a=(0,r.doc)(s.db,"dailyReports",t);await (0,r.r7)(a,{companyComment:e,updatedAt:(0,r.Bt)()})}catch(t){throw console.error("addCompanyComment error:",t),t}}async getMatch(t){try{let e=await (0,r.getDoc)((0,r.doc)(s.db,"matches",t));if(e.exists())return{id:e.id,...e.data()};return null}catch(t){throw console.error("getMatch error:",t),t}}async completeInternship(t){try{await (0,r.r7)((0,r.doc)(s.db,"matches",t),{status:"completed",endDate:(0,r.Bt)()})}catch(t){throw console.error("completeInternship error:",t),t}}async submitEvaluation(t,e,a,n,i){try{await (0,r.ET)((0,r.hJ)(s.db,"evaluations"),{matchId:t,fromId:e,toId:a,score:n,comment:i,createdAt:(0,r.Bt)()})}catch(t){throw console.error("submitEvaluation error:",t),t}}async getEvaluation(t,e){try{let a=(0,r.IO)((0,r.hJ)(s.db,"evaluations"),(0,r.ar)("matchId","==",t),(0,r.ar)("fromId","==",e)),n=await (0,r.PL)(a);if(!n.empty)return{id:n.docs[0].id,...n.docs[0].data()};return null}catch(t){throw console.error("getEvaluation error:",t),t}}}let i=new n},1437:function(t,e,a){"use strict";a.d(e,{B:function(){return i}});var s=a(6410),r=a(6943);a(2265);class n{async markAsRead(t){let e=(0,r.doc)(s.db,"notifications",t);await (0,r.r7)(e,{read:!0,updatedAt:(0,r.Bt)()})}async markAllAsRead(t){let e=(0,r.IO)((0,r.hJ)(s.db,"notifications"),(0,r.ar)("userId","==",t),(0,r.ar)("read","==",!1)),a=await (0,r.PL)(e);if(a.empty)return;let n=(0,r.qs)(s.db);a.docs.forEach(t=>{n.update(t.ref,{read:!0,updatedAt:(0,r.Bt)()})}),await n.commit()}async createNotification(t,e,a,n,i){try{await (0,r.ET)((0,r.hJ)(s.db,"notifications"),{userId:t,title:e,message:a,type:n,link:i,read:!1,createdAt:(0,r.Bt)()})}catch(t){console.error("Error creating notification:",t)}}}let i=new n}},function(t){t.O(0,[287,8483,1442,8697,6165,2971,2117,1744],function(){return t(t.s=7167)}),_N_E=t.O()}]);