(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6249],{2198:function(e,t,r){Promise.resolve().then(r.bind(r,8108))},2660:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8755).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},1047:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8755).Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},6362:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8755).Z)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},3774:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(8755).Z)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},9376:function(e,t,r){"use strict";var a=r(5475);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},8108:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return y}});var a=r(7437),s=r(2265),n=r(6943),i=r(6410),l=r(4362),c=r(757),d=r(6334),o=r(8711),u=r(1817),m=r(2660),x=r(3774),f=r(1047),h=r(6362),p=r(6424),g=r(9376),b=r(7648);function y(e){var t;let{params:r}=e,{id:y}=r,{user:j}=(0,l.a)(),[v,N]=(0,s.useState)(null),[w,E]=(0,s.useState)(!0),[F,k]=(0,s.useState)(null),[A,D]=(0,s.useState)(!1),C=(0,g.useRouter)();if((0,s.useEffect)(()=>{async function e(){try{let e=await (0,n.getDoc)((0,n.doc)(i.db,"jobPostings",y));if(!e.exists()){E(!1);return}let t=e.data(),r={...t,id:e.id,requirements:Array.isArray(t.requirements)?t.requirements:[]};if(j&&r.companyId!==j.id){C.push("/company/jobs");return}N(r)}catch(e){console.error("Error fetching job:",e)}finally{E(!1)}}j&&e()},[y,j,C]),w)return(0,a.jsx)("div",{className:"flex justify-center p-12",children:(0,a.jsx)(u.Z,{className:"animate-spin text-[#1E3A5F]"})});if(!v)return(0,a.jsxs)("div",{className:"text-center p-12",children:[(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"求人が見つかりません"}),(0,a.jsx)(b.default,{href:"/company/jobs",children:(0,a.jsx)(d.z,{variant:"outline",children:"求人一覧に戻る"})})]});let Z=v.requirements||[];return(0,a.jsxs)("div",{className:"max-w-3xl mx-auto space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center gap-3",children:(0,a.jsxs)(d.z,{variant:"ghost",size:"sm",onClick:()=>C.push("/company/jobs"),children:[(0,a.jsx)(m.Z,{size:16,className:"mr-1"}),"求人一覧"]})}),(0,a.jsxs)(c.Z,{className:"p-8",children:[(0,a.jsx)("div",{className:"flex justify-between items-start mb-6",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-[#1E3A5F]",children:v.title}),(e=>{switch(e){case"published":return(0,a.jsx)(o.C,{variant:"success",children:"公開中"});case"pending_approval":return(0,a.jsx)(o.C,{variant:"warning",children:"承認待ち"});case"draft":return(0,a.jsx)(o.C,{variant:"outline",children:"下書き"});case"closed":return(0,a.jsx)(o.C,{variant:"error",className:"bg-gray-100 text-gray-500",children:"終了"});default:return(0,a.jsx)(o.C,{variant:"outline",children:e})}})(v.status)]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(x.Z,{size:14})," ",v.location||"未設定"]}),v.salary&&(0,a.jsxs)("span",{children:["\uD83D\uDCB0 ",v.salary]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(f.Z,{size:14}),(null===(t=v.createdAt)||void 0===t?void 0:t.toDate)?(0,p.WU)(v.createdAt.toDate(),"yyyy/MM/dd"):"-"," 作成"]})]})]})}),"pending_approval"===v.status&&(0,a.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3 mb-6 text-sm text-amber-800",children:"⏳ 管理者による承認を待っています。承認後に学生へ公開されます。"}),"draft"===v.status&&(0,a.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3 mb-6 text-sm text-gray-600",children:"\uD83D\uDCDD この求人は下書き状態です。管理者からの差し戻しによる可能性があります。"}),Z.length>0&&(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-sm font-bold text-gray-600 mb-2",children:"応募要件 / スキル"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:Z.map((e,t)=>(0,a.jsx)(o.C,{variant:"outline",className:"bg-gray-50",children:e},t))})]}),v.content&&(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-sm font-bold text-gray-600 mb-2",children:"仕事内容"}),(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 text-sm whitespace-pre-wrap",children:v.content})]}),v.pdfFileId&&(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-sm font-bold text-gray-600 mb-2",children:"募集要項PDF"}),v.pdfFileId&&(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 bg-gray-50 rounded-lg border border-dashed border-gray-300",children:[(0,a.jsx)("div",{className:"mb-4 text-[#1E3A5F]",children:(0,a.jsx)(h.Z,{size:48})}),(0,a.jsx)("p",{className:"text-gray-600 mb-4 font-medium",children:"PDFファイルが添付されています"}),F?(0,a.jsxs)("a",{href:F,target:"_blank",className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg text-[#1E3A5F] text-sm hover:bg-gray-50 transition-colors",children:[(0,a.jsx)(h.Z,{size:16})," 別タブで開く"]}):(0,a.jsx)(d.z,{variant:"outline",isLoading:A,onClick:async()=>{if(v.pdfFileId){D(!0);try{let e=i.I.currentUser?await i.I.currentUser.getIdToken():null;if(e){let t=await fetch("/api/pdf/".concat(v.pdfFileId),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.blob();k(URL.createObjectURL(e))}}}catch(e){console.error(e),alert("PDF取得エラー")}finally{D(!1)}}},children:"PDFを読み込む"})]})]})]})]})}},8711:function(e,t,r){"use strict";r.d(t,{C:function(){return i}});var a=r(7437),s=r(2265),n=r(3448);let i=(0,s.forwardRef)((e,t)=>{let{className:r,variant:s="default",...i}=e;return(0,a.jsx)("span",{ref:t,className:(0,n.cn)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium transition-colors",{default:"bg-[#1E3A5F]/10 text-[#161B33]",success:"bg-[#48BB78]/10 text-[#48BB78]",warning:"bg-[#ED8936]/10 text-[#ED8936]",error:"bg-[#F56565]/10 text-[#F56565]",outline:"border border-gray-200 text-gray-500"}[s],r),...i})});i.displayName="Badge"},6334:function(e,t,r){"use strict";r.d(t,{z:function(){return l}});var a=r(7437),s=r(2265),n=r(3448),i=r(1817);let l=(0,s.forwardRef)((e,t)=>{let{className:r,variant:s="primary",size:l="md",isLoading:c,children:d,disabled:o,...u}=e;return(0,a.jsxs)("button",{ref:t,className:(0,n.cn)("inline-flex items-center justify-center rounded-lg font-medium transition-all focus:outline-none focus:ring-2 focus:ring-[#1E3A5F]/50 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-gradient-to-r from-[#161B33] to-[#142841] text-white shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all duration-300 border border-white/10",secondary:"glass-button text-[#1E3A5F] bg-white/40 hover:bg-white/60",outline:"glass-button border border-[#1E3A5F]/30 text-[#1E3A5F] hover:bg-[#1E3A5F]/5",ghost:"text-[#1E3A5F] hover:bg-[#1E3A5F]/10",danger:"glass-button bg-gradient-to-r from-[#F56565] to-[#E53E3E] text-white border-0"}[s],{sm:"h-8 px-3 text-sm",md:"h-10 px-4 py-2",lg:"h-12 px-6 text-lg"}[l],r),disabled:o||c,...u,children:[c&&(0,a.jsx)(i.Z,{className:"mr-2 h-4 w-4 animate-spin"}),d]})});l.displayName="Button"},757:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var a=r(7437),s=r(2265),n=r(3448);let i=(0,s.forwardRef)((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("glass rounded-2xl p-6 transition-all duration-300",r),...s})});i.displayName="Card"},4362:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return o},a:function(){return u}});var a=r(7437),s=r(2265),n=r(1466),i=r(6943),l=r(6410),c=r(9376);let d=(0,s.createContext)({user:null,firebaseUser:null,loading:!0,emailVerified:!1,logout:async()=>{},refreshUser:async()=>{}});function o(e){let{children:t}=e,[r,o]=(0,s.useState)(null),[u,m]=(0,s.useState)(null),[x,f]=(0,s.useState)(!0),[h,p]=(0,s.useState)(!1),g=(0,c.useRouter)(),b=async e=>{try{let t=await (0,i.getDoc)((0,i.doc)(l.db,"users",e.uid));t.exists()?o({id:t.id,...t.data()}):o(null)}catch(e){console.error("Error fetching user data:",e),o(null)}};(0,s.useEffect)(()=>{let e=(0,n.Aj)(l.I,async e=>{m(e),e?(p(e.emailVerified),await b(e)):(o(null),p(!1)),f(!1)});return()=>e()},[]);let y=async()=>{await (0,n.w7)(l.I),o(null),m(null),p(!1),g.push("/login")},j=async()=>{let e=l.I.currentUser;e&&(await e.reload(),p(e.emailVerified),await b(e))};return(0,a.jsx)(d.Provider,{value:{user:r,firebaseUser:u,loading:x,emailVerified:h,logout:y,refreshUser:j},children:t})}let u=()=>(0,s.useContext)(d)},6410:function(e,t,r){"use strict";r.d(t,{I:function(){return l},V:function(){return d},db:function(){return c}});var a=r(738),s=r(1466),n=r(6943);let i=0===(0,a.C6)().length?(0,a.ZF)({apiKey:"AIzaSyDL2GylAt2YVRSstEpp4hucbcqw7RuVk4o",authDomain:"internship-matching-app.firebaseapp.com",projectId:"internship-matching-app",messagingSenderId:"299078518812",appId:"1:299078518812:web:03ad34bb4323c497a677d9"}):(0,a.C6)()[0],l=(0,s.v0)(i),c=(0,n.ad)(i),d=new s.hJ},3448:function(e,t,r){"use strict";r.d(t,{cn:function(){return n}});var a=r(1994),s=r(3335);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}}},function(e){e.O(0,[287,8483,1442,8697,7648,6165,2971,2117,1744],function(){return e(e.s=2198)}),_N_E=e.O()}]);