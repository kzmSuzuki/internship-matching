(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4567],{3658:function(e,t,a){Promise.resolve().then(a.bind(a,5249))},5005:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(8755).Z)("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]])},1671:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(8755).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},8736:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(8755).Z)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},1817:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(8755).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},9397:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(8755).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},3578:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(8755).Z)("shield-alert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]])},9376:function(e,t,a){"use strict";var s=a(5475);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})},5249:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return g}});var s=a(7437),n=a(2265),r=a(4362),i=a(6943),l=a(6410),c=a(757),d=a(6334),o=a(1817),u=a(9397),p=a(3578);let h=(0,a(8755).Z)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var m=a(5005),x=a(8736),f=a(1671),b=a(7648);function g(){let{user:e}=(0,r.a)(),[t,a]=(0,n.useState)({activeJobs:0,pendingJobs:0,newApplicants:0,activeInterns:0}),[g,j]=(0,n.useState)(!0),[v,N]=(0,n.useState)(null);return((0,n.useEffect)(()=>{async function t(){if(e)try{let t=await (0,i.getDoc)((0,i.doc)(l.db,"companies",e.id));t.exists()&&N(!0===t.data().isApproved);let s=(0,i.hJ)(l.db,"jobPostings"),n=(0,i.hJ)(l.db,"applications"),r=(0,i.hJ)(l.db,"matches"),c=await (0,i.Yp)((0,i.IO)(s,(0,i.ar)("companyId","==",e.id),(0,i.ar)("status","==","published"))),d=await (0,i.Yp)((0,i.IO)(s,(0,i.ar)("companyId","==",e.id),(0,i.ar)("status","==","pending_approval"))),o=await (0,i.Yp)((0,i.IO)(n,(0,i.ar)("companyId","==",e.id),(0,i.ar)("status","==","pending_company"))),u=await (0,i.Yp)((0,i.IO)(r,(0,i.ar)("companyId","==",e.id),(0,i.ar)("status","==","active")));a({activeJobs:c.data().count,pendingJobs:d.data().count,newApplicants:o.data().count,activeInterns:u.data().count})}catch(e){console.error("Error fetching stats:",e)}finally{j(!1)}}e&&t()},[e]),g)?(0,s.jsx)("div",{className:"flex justify-center p-12",children:(0,s.jsx)(o.Z,{className:"animate-spin text-[#1E3A5F]"})}):(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-[#1E3A5F]",children:"企業ダッシュボード"}),(0,s.jsxs)("p",{className:"text-gray-500",children:["ようこそ、",null==e?void 0:e.name," 様"]})]}),v?(0,s.jsx)(b.default,{href:"/company/jobs/new",children:(0,s.jsxs)(d.z,{children:[(0,s.jsx)(u.Z,{size:18,className:"mr-2"}),"新規求人作成"]})}):(0,s.jsxs)(d.z,{disabled:!0,className:"opacity-50 cursor-not-allowed",children:[(0,s.jsx)(u.Z,{size:18,className:"mr-2"}),"新規求人作成"]})]}),!1===v&&(0,s.jsxs)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 flex items-center gap-3",children:[(0,s.jsx)(p.Z,{className:"text-amber-600 flex-shrink-0",size:20}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-amber-800",children:"企業アカウントが承認待ちです"}),(0,s.jsx)("p",{className:"text-xs text-amber-600",children:"管理者による承認が完了すると、求人の作成が可能になります。プロフィールを充実させておくと承認がスムーズです。"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,s.jsx)(y,{icon:v?(0,s.jsx)(h,{}):(0,s.jsx)(p.Z,{}),label:"企業アカウント",value:v?"承認済み":"承認待ち",isStatus:!0,approved:v,link:"/company/profile"}),(0,s.jsx)(y,{icon:(0,s.jsx)(m.Z,{}),label:"公開中の求人",value:t.activeJobs,subValue:t.pendingJobs>0?"".concat(t.pendingJobs,"件が承認待ち"):void 0,link:"/company/jobs"}),(0,s.jsx)(y,{icon:(0,s.jsx)(x.Z,{}),label:"新規応募",value:t.newApplicants,link:"/company/applicants"}),(0,s.jsx)(y,{icon:(0,s.jsx)(f.Z,{}),label:"実施中のインターン",value:t.activeInterns,link:"/company/applicants"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)(c.Z,{className:"p-6",children:[(0,s.jsx)("h3",{className:"font-bold mb-4",children:"最近の応募"}),t.newApplicants>0?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsxs)("p",{className:"text-2xl font-bold text-[#1E3A5F] mb-2",children:[t.newApplicants,"件"]}),(0,s.jsx)("p",{className:"text-gray-500 mb-4",children:"の新しい応募があります"}),(0,s.jsx)(b.default,{href:"/company/applicants",children:(0,s.jsx)(d.z,{variant:"outline",children:"応募を確認する"})})]}):(0,s.jsx)("div",{className:"text-center py-8 text-gray-400",children:"新しい応募はありません"})]}),(0,s.jsxs)(c.Z,{className:"p-6",children:[(0,s.jsx)("h3",{className:"font-bold mb-4",children:"ステータス"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:"企業承認"}),v?(0,s.jsx)("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded",children:"承認済み"}):(0,s.jsx)("span",{className:"text-xs bg-amber-100 text-amber-700 px-2 py-1 rounded",children:"承認待ち"})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:"企業プロフィール"}),(0,s.jsx)(b.default,{href:"/company/profile",className:"text-xs text-[#1E3A5F] hover:underline",children:"編集"})]})]})]})]})]})}function y(e){let{icon:t,label:a,value:n,subValue:r,link:i,isStatus:l,approved:d}=e,o=(0,s.jsxs)(c.Z,{className:"p-6 flex items-center gap-4 hover:shadow-md transition-shadow cursor-pointer h-full ".concat(l&&!d?"border-amber-300 bg-amber-50/50":""),children:[(0,s.jsx)("div",{className:"p-3 rounded-lg ".concat(l&&!d?"bg-amber-100 text-amber-600":"bg-[#1E3A5F]/10 text-[#1E3A5F]"),children:t}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:a}),(0,s.jsx)("p",{className:"text-2xl font-bold ".concat(l&&!d?"text-amber-700 text-lg":""),children:n}),r&&(0,s.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:r})]})]});return i?(0,s.jsx)(b.default,{href:i,children:o}):o}},6334:function(e,t,a){"use strict";a.d(t,{z:function(){return l}});var s=a(7437),n=a(2265),r=a(3448),i=a(1817);let l=(0,n.forwardRef)((e,t)=>{let{className:a,variant:n="primary",size:l="md",isLoading:c,children:d,disabled:o,...u}=e;return(0,s.jsxs)("button",{ref:t,className:(0,r.cn)("inline-flex items-center justify-center rounded-lg font-medium transition-all focus:outline-none focus:ring-2 focus:ring-[#1E3A5F]/50 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-gradient-to-r from-[#161B33] to-[#142841] text-white shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all duration-300 border border-white/10",secondary:"glass-button text-[#1E3A5F] bg-white/40 hover:bg-white/60",outline:"glass-button border border-[#1E3A5F]/30 text-[#1E3A5F] hover:bg-[#1E3A5F]/5",ghost:"text-[#1E3A5F] hover:bg-[#1E3A5F]/10",danger:"glass-button bg-gradient-to-r from-[#F56565] to-[#E53E3E] text-white border-0"}[n],{sm:"h-8 px-3 text-sm",md:"h-10 px-4 py-2",lg:"h-12 px-6 text-lg"}[l],a),disabled:o||c,...u,children:[c&&(0,s.jsx)(i.Z,{className:"mr-2 h-4 w-4 animate-spin"}),d]})});l.displayName="Button"},757:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var s=a(7437),n=a(2265),r=a(3448);let i=(0,n.forwardRef)((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("glass rounded-2xl p-6 transition-all duration-300",a),...n})});i.displayName="Card"},4362:function(e,t,a){"use strict";a.d(t,{AuthProvider:function(){return o},a:function(){return u}});var s=a(7437),n=a(2265),r=a(1466),i=a(6943),l=a(6410),c=a(9376);let d=(0,n.createContext)({user:null,firebaseUser:null,loading:!0,emailVerified:!1,logout:async()=>{},refreshUser:async()=>{}});function o(e){let{children:t}=e,[a,o]=(0,n.useState)(null),[u,p]=(0,n.useState)(null),[h,m]=(0,n.useState)(!0),[x,f]=(0,n.useState)(!1),b=(0,c.useRouter)(),g=async e=>{try{let t=await (0,i.getDoc)((0,i.doc)(l.db,"users",e.uid));t.exists()?o({id:t.id,...t.data()}):o(null)}catch(e){console.error("Error fetching user data:",e),o(null)}};(0,n.useEffect)(()=>{let e=(0,r.Aj)(l.I,async e=>{p(e),e?(f(e.emailVerified),await g(e)):(o(null),f(!1)),m(!1)});return()=>e()},[]);let y=async()=>{await (0,r.w7)(l.I),o(null),p(null),f(!1),b.push("/login")},j=async()=>{let e=l.I.currentUser;e&&(await e.reload(),f(e.emailVerified),await g(e))};return(0,s.jsx)(d.Provider,{value:{user:a,firebaseUser:u,loading:h,emailVerified:x,logout:y,refreshUser:j},children:t})}let u=()=>(0,n.useContext)(d)},6410:function(e,t,a){"use strict";a.d(t,{I:function(){return l},V:function(){return d},db:function(){return c}});var s=a(738),n=a(1466),r=a(6943);let i=0===(0,s.C6)().length?(0,s.ZF)({apiKey:"AIzaSyDL2GylAt2YVRSstEpp4hucbcqw7RuVk4o",authDomain:"internship-matching-app.firebaseapp.com",projectId:"internship-matching-app",messagingSenderId:"299078518812",appId:"1:299078518812:web:03ad34bb4323c497a677d9"}):(0,s.C6)()[0],l=(0,n.v0)(i),c=(0,r.ad)(i),d=new n.hJ},3448:function(e,t,a){"use strict";a.d(t,{cn:function(){return r}});var s=a(1994),n=a(3335);function r(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.m6)((0,s.W)(t))}}},function(e){e.O(0,[287,8483,1442,8697,7648,2971,2117,1744],function(){return e(e.s=3658)}),_N_E=e.O()}]);