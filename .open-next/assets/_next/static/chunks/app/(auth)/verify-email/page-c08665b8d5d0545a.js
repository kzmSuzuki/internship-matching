(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7552],{8384:function(e,t,s){Promise.resolve().then(s.bind(s,8616))},6858:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(8755).Z)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},1671:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(8755).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1817:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(8755).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},9345:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(8755).Z)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},9376:function(e,t,s){"use strict";var r=s(5475);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},8616:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var r=s(7437),a=s(2265),n=s(1466),l=s(6410),i=s(4362),c=s(9376),u=s(757),d=s(6334),o=s(1817),m=s(9345),x=s(1671),h=s(6858);let f=(0,s(8755).Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);function g(){let[e,t]=(0,a.useState)(!1),[s,g]=(0,a.useState)(!1),[p,b]=(0,a.useState)(!1),[y,j]=(0,a.useState)(!1),[w,N]=(0,a.useState)(""),[v,F]=(0,a.useState)(!0),k=(0,c.useRouter)(),{refreshUser:E}=(0,i.a)();(0,a.useEffect)(()=>{let e=l.I.onAuthStateChanged(e=>{e&&e.emailVerified&&b(!0),F(!1)});return()=>e()},[]),(0,a.useEffect)(()=>{let e=l.I.currentUser;if(!e||p)return;let t=setInterval(async()=>{try{await e.reload(),e.emailVerified&&(b(!0),clearInterval(t),await E())}catch(e){}},3e3);return()=>clearInterval(t)},[p,E]);let A=(0,a.useCallback)(async()=>{let e=l.I.currentUser;if(e){t(!0),N(""),g(!1);try{await (0,n.w$)(e),g(!0),setTimeout(()=>g(!1),5e3)}catch(e){"auth/too-many-requests"===e.code?N("送信回数の上限に達しました。しばらく待ってから再送してください。"):N("メールの再送に失敗しました。時間をおいて再度お試しください。"),setTimeout(()=>N(""),5e3)}finally{t(!1)}}},[]),Z=(0,a.useCallback)(async()=>{let e=l.I.currentUser;if(e){j(!0),N("");try{await e.reload(),e.emailVerified?(b(!0),await E()):(N("まだメールの確認が完了していません。受信箱（迷惑メールフォルダ含む）をご確認ください。"),setTimeout(()=>N(""),5e3))}catch(e){N("確認状況の取得に失敗しました。"),setTimeout(()=>N(""),5e3)}finally{j(!1)}}},[E]);if(v)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-[#F5F7FA] p-4",children:(0,r.jsxs)(u.Z,{className:"w-full max-w-md p-8 text-center",children:[(0,r.jsx)(o.Z,{className:"animate-spin mx-auto text-gray-400 mb-4",size:32}),(0,r.jsx)("p",{className:"text-gray-500",children:"読み込み中..."})]})});let z=l.I.currentUser;return z?p?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-[#F5F7FA] p-4",children:(0,r.jsxs)(u.Z,{className:"w-full max-w-md p-8 text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,r.jsx)(x.Z,{className:"text-green-600",size:32})}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-[#1E3A5F] mb-2",children:"メール確認完了！"}),(0,r.jsxs)("p",{className:"text-gray-600 mb-6",children:["メールアドレスの確認が完了しました。",(0,r.jsx)("br",{}),"企業プロフィールの設定に進みましょう。"]}),(0,r.jsxs)(d.z,{className:"w-full gap-2",onClick:()=>k.push("/"),children:["ダッシュボードへ ",(0,r.jsx)(h.Z,{size:16})]})]})}):(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-[#F5F7FA] p-4",children:(0,r.jsx)(u.Z,{className:"w-full max-w-md p-8",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,r.jsx)(m.Z,{className:"text-[#1E3A5F]",size:32})}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-[#1E3A5F] mb-2",children:"メールアドレスの確認"}),(0,r.jsx)("p",{className:"text-gray-600 mb-2",children:"以下のアドレスに確認メールを送信しました。"}),(0,r.jsx)("p",{className:"font-medium text-[#1E3A5F] mb-6 break-all",children:z.email}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 text-left space-y-2",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"\uD83D\uDCE7 メール内の確認リンクをクリックしてください。"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"\uD83D\uDD04 確認後、このページは自動的に更新されます。"}),(0,r.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"※ メールが届かない場合は、迷惑メールフォルダもご確認ください。"})]}),w&&(0,r.jsx)("div",{className:"bg-[#F56565]/10 text-[#F56565] p-3 rounded-lg text-sm mb-4",children:w}),s&&(0,r.jsx)("div",{className:"bg-green-50 text-green-700 p-3 rounded-lg text-sm mb-4",children:"✅ 確認メールを再送しました。"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)(d.z,{className:"w-full gap-2",onClick:Z,isLoading:y,children:[(0,r.jsx)(f,{size:16}),"確認状況をチェック"]}),(0,r.jsx)(d.z,{variant:"outline",className:"w-full",onClick:A,isLoading:e,children:"確認メールを再送する"})]}),(0,r.jsxs)("p",{className:"mt-6 pt-4 border-t border-gray-100 text-xs text-gray-400",children:["別のアカウントでログインする場合は、",(0,r.jsx)("button",{onClick:()=>k.push("/login"),className:"text-[#1E3A5F] hover:underline",children:"こちら"})]})]})})}):(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-[#F5F7FA] p-4",children:(0,r.jsxs)(u.Z,{className:"w-full max-w-md p-8 text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,r.jsx)(m.Z,{className:"text-gray-400",size:32})}),(0,r.jsx)("h1",{className:"text-xl font-bold text-[#1E3A5F] mb-2",children:"セッションが切れました"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"再度ログインして、メールアドレスの確認を完了してください。"}),(0,r.jsx)(d.z,{onClick:()=>k.push("/login"),className:"w-full",children:"ログインページへ"})]})})}},6334:function(e,t,s){"use strict";s.d(t,{z:function(){return i}});var r=s(7437),a=s(2265),n=s(3448),l=s(1817);let i=(0,a.forwardRef)((e,t)=>{let{className:s,variant:a="primary",size:i="md",isLoading:c,children:u,disabled:d,...o}=e;return(0,r.jsxs)("button",{ref:t,className:(0,n.cn)("inline-flex items-center justify-center rounded-lg font-medium transition-all focus:outline-none focus:ring-2 focus:ring-[#1E3A5F]/50 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-gradient-to-r from-[#161B33] to-[#142841] text-white shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all duration-300 border border-white/10",secondary:"glass-button text-[#1E3A5F] bg-white/40 hover:bg-white/60",outline:"glass-button border border-[#1E3A5F]/30 text-[#1E3A5F] hover:bg-[#1E3A5F]/5",ghost:"text-[#1E3A5F] hover:bg-[#1E3A5F]/10",danger:"glass-button bg-gradient-to-r from-[#F56565] to-[#E53E3E] text-white border-0"}[a],{sm:"h-8 px-3 text-sm",md:"h-10 px-4 py-2",lg:"h-12 px-6 text-lg"}[i],s),disabled:d||c,...o,children:[c&&(0,r.jsx)(l.Z,{className:"mr-2 h-4 w-4 animate-spin"}),u]})});i.displayName="Button"},757:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var r=s(7437),a=s(2265),n=s(3448);let l=(0,a.forwardRef)((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("glass rounded-2xl p-6 transition-all duration-300",s),...a})});l.displayName="Card"},4362:function(e,t,s){"use strict";s.d(t,{AuthProvider:function(){return d},a:function(){return o}});var r=s(7437),a=s(2265),n=s(1466),l=s(6943),i=s(6410),c=s(9376);let u=(0,a.createContext)({user:null,firebaseUser:null,loading:!0,emailVerified:!1,logout:async()=>{},refreshUser:async()=>{}});function d(e){let{children:t}=e,[s,d]=(0,a.useState)(null),[o,m]=(0,a.useState)(null),[x,h]=(0,a.useState)(!0),[f,g]=(0,a.useState)(!1),p=(0,c.useRouter)(),b=async e=>{try{let t=await (0,l.getDoc)((0,l.doc)(i.db,"users",e.uid));t.exists()?d({id:t.id,...t.data()}):d(null)}catch(e){console.error("Error fetching user data:",e),d(null)}};(0,a.useEffect)(()=>{let e=(0,n.Aj)(i.I,async e=>{m(e),e?(g(e.emailVerified),await b(e)):(d(null),g(!1)),h(!1)});return()=>e()},[]);let y=async()=>{await (0,n.w7)(i.I),d(null),m(null),g(!1),p.push("/login")},j=async()=>{let e=i.I.currentUser;e&&(await e.reload(),g(e.emailVerified),await b(e))};return(0,r.jsx)(u.Provider,{value:{user:s,firebaseUser:o,loading:x,emailVerified:f,logout:y,refreshUser:j},children:t})}let o=()=>(0,a.useContext)(u)},6410:function(e,t,s){"use strict";s.d(t,{I:function(){return i},V:function(){return u},db:function(){return c}});var r=s(738),a=s(1466),n=s(6943);let l=0===(0,r.C6)().length?(0,r.ZF)({apiKey:"AIzaSyDL2GylAt2YVRSstEpp4hucbcqw7RuVk4o",authDomain:"internship-matching-app.firebaseapp.com",projectId:"internship-matching-app",messagingSenderId:"299078518812",appId:"1:299078518812:web:03ad34bb4323c497a677d9"}):(0,r.C6)()[0],i=(0,a.v0)(l),c=(0,n.ad)(l),u=new a.hJ},3448:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var r=s(1994),a=s(3335);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}}},function(e){e.O(0,[287,8483,1442,8697,2971,2117,1744],function(){return e(e.s=8384)}),_N_E=e.O()}]);