module.exports=[92755,a=>{"use strict";var b=a.i(87924),c=a.i(38246),d=a.i(50944),e=a.i(68114),f=a.i(70106);let g=(0,f.default)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]]),h=(0,f.default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);var i=a.i(41961),j=a.i(4720);let k=(0,f.default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),l=(0,f.default)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var m=a.i(20005);let n=[{icon:g,label:"ホーム",href:"/"},{icon:h,label:"求人検索",href:"/student/jobs"},{icon:i.Briefcase,label:"企業求人",href:"/company/jobs"},{icon:j.FileText,label:"応募管理",href:"/student/applications"},{icon:k,label:"プロフィール",href:"/student/profile"},{icon:l,label:"設定",href:"/settings"}];function o(){let a=(0,d.usePathname)();return(0,b.jsxs)("aside",{className:"fixed left-4 top-4 z-40 h-[calc(100vh-2rem)] w-18 glass rounded-2xl border-r-0 flex flex-col items-center py-6 transition-all duration-300",children:[(0,b.jsx)("div",{className:"mb-8 p-2 rounded-xl bg-[#161B33]/10",children:(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-[#161B33]"})}),(0,b.jsx)("nav",{className:"flex-1 flex flex-col gap-4 w-full px-2",children:n.map(d=>{let f=a===d.href;return(0,b.jsxs)(c.default,{href:d.href,className:(0,e.cn)("relative group flex items-center justify-center w-12 h-12 rounded-xl transition-all duration-200",f?"bg-[#161B33] text-white shadow-md shadow-[#161B33]/20":"text-gray-500 hover:bg-[#161B33]/10 hover:text-[#161B33]"),children:[(0,b.jsx)(d.icon,{size:22,strokeWidth:f?2.5:2}),(0,b.jsx)("span",{className:"absolute left-14 px-2 py-1 bg-[#1E3A5F] text-white text-xs rounded opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all whitespace-nowrap z-50",children:d.label})]},d.href)})}),(0,b.jsx)("button",{className:"mt-auto p-3 text-gray-500 hover:text-[#F56565] hover:bg-[#F56565]/10 rounded-xl transition-all",children:(0,b.jsx)(m.LogOut,{size:22})})]})}var p=a.i(11642),q=a.i(20237);a.i(69387);var r=a.i(60574),s=a.i(72131);let t=new class{async markAsRead(a){let b=(0,r.doc)(q.db,"notifications",a);await (0,r.updateDoc)(b,{read:!0,updatedAt:(0,r.serverTimestamp)()})}async markAllAsRead(a){let b=(0,r.query)((0,r.collection)(q.db,"notifications"),(0,r.where)("userId","==",a),(0,r.where)("read","==",!1)),c=await (0,r.getDocs)(b);if(c.empty)return;let d=(0,r.writeBatch)(q.db);c.docs.forEach(a=>{d.update(a.ref,{read:!0,updatedAt:(0,r.serverTimestamp)()})}),await d.commit()}},u=(0,f.default)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),v=(0,f.default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var w=a.i(42724),x=a.i(44513),y=a.i(52587),z=a.i(23464),A=a.i(57270),B=a.i(74016);function C(a,b){let c=(0,B.toDate)(a)-(0,B.toDate)(b);return c<0?-1:c>0?1:c}var D=a.i(59296);let E={lessThanXSeconds:{one:"1秒未満",other:"{{count}}秒未満",oneWithSuffix:"約1秒",otherWithSuffix:"約{{count}}秒"},xSeconds:{one:"1秒",other:"{{count}}秒"},halfAMinute:"30秒",lessThanXMinutes:{one:"1分未満",other:"{{count}}分未満",oneWithSuffix:"約1分",otherWithSuffix:"約{{count}}分"},xMinutes:{one:"1分",other:"{{count}}分"},aboutXHours:{one:"約1時間",other:"約{{count}}時間"},xHours:{one:"1時間",other:"{{count}}時間"},xDays:{one:"1日",other:"{{count}}日"},aboutXWeeks:{one:"約1週間",other:"約{{count}}週間"},xWeeks:{one:"1週間",other:"{{count}}週間"},aboutXMonths:{one:"約1か月",other:"約{{count}}か月"},xMonths:{one:"1か月",other:"{{count}}か月"},aboutXYears:{one:"約1年",other:"約{{count}}年"},xYears:{one:"1年",other:"{{count}}年"},overXYears:{one:"1年以上",other:"{{count}}年以上"},almostXYears:{one:"1年近く",other:"{{count}}年近く"}};var F=a.i(95935);let G={date:(0,F.buildFormatLongFn)({formats:{full:"y年M月d日EEEE",long:"y年M月d日",medium:"y/MM/dd",short:"y/MM/dd"},defaultWidth:"full"}),time:(0,F.buildFormatLongFn)({formats:{full:"H時mm分ss秒 zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},defaultWidth:"full"}),dateTime:(0,F.buildFormatLongFn)({formats:{full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},defaultWidth:"full"})},H={lastWeek:"先週のeeeeのp",yesterday:"昨日のp",today:"今日のp",tomorrow:"明日のp",nextWeek:"翌週のeeeeのp",other:"P"};var I=a.i(12740);let J={ordinalNumber:(a,b)=>{let c=Number(a);switch(String(b?.unit)){case"year":return`${c}年`;case"quarter":return`第${c}四半期`;case"month":return`${c}月`;case"week":return`第${c}週`;case"date":return`${c}日`;case"hour":return`${c}時`;case"minute":return`${c}分`;case"second":return`${c}秒`;default:return`${c}`}},era:(0,I.buildLocalizeFn)({values:{narrow:["BC","AC"],abbreviated:["紀元前","西暦"],wide:["紀元前","西暦"]},defaultWidth:"wide"}),quarter:(0,I.buildLocalizeFn)({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["第1四半期","第2四半期","第3四半期","第4四半期"]},defaultWidth:"wide",argumentCallback:a=>Number(a)-1}),month:(0,I.buildLocalizeFn)({values:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],wide:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]},defaultWidth:"wide"}),day:(0,I.buildLocalizeFn)({values:{narrow:["日","月","火","水","木","金","土"],short:["日","月","火","水","木","金","土"],abbreviated:["日","月","火","水","木","金","土"],wide:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"]},defaultWidth:"wide"}),dayPeriod:(0,I.buildLocalizeFn)({values:{narrow:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"},abbreviated:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"},wide:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"}},defaultWidth:"wide",formattingValues:{narrow:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"},abbreviated:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"},wide:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"}},defaultFormattingWidth:"wide"})};var K=a.i(47125),L=a.i(5417);let M={code:"ja",formatDistance:(a,b,c)=>{let d;c=c||{};let e=E[a];if(d="string"==typeof e?e:1===b?c.addSuffix&&e.oneWithSuffix?e.oneWithSuffix:e.one:c.addSuffix&&e.otherWithSuffix?e.otherWithSuffix.replace("{{count}}",String(b)):e.other.replace("{{count}}",String(b)),c.addSuffix)if(c.comparison&&c.comparison>0)return d+"後";else return d+"前";return d},formatLong:G,formatRelative:(a,b,c,d)=>H[a],localize:J,match:{ordinalNumber:(0,K.buildMatchPatternFn)({matchPattern:/^第?\d+(年|四半期|月|週|日|時|分|秒)?/i,parsePattern:/\d+/i,valueCallback:function(a){return parseInt(a,10)}}),era:(0,L.buildMatchFn)({matchPatterns:{narrow:/^(B\.?C\.?|A\.?D\.?)/i,abbreviated:/^(紀元[前後]|西暦)/i,wide:/^(紀元[前後]|西暦)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^B/i,/^A/i],any:[/^(紀元前)/i,/^(西暦|紀元後)/i]},defaultParseWidth:"any"}),quarter:(0,L.buildMatchFn)({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^Q[1234]/i,wide:/^第[1234一二三四１２３４]四半期/i},defaultMatchWidth:"wide",parsePatterns:{any:[/(1|一|１)/i,/(2|二|２)/i,/(3|三|３)/i,/(4|四|４)/i]},defaultParseWidth:"any",valueCallback:a=>a+1}),month:(0,L.buildMatchFn)({matchPatterns:{narrow:/^([123456789]|1[012])/,abbreviated:/^([123456789]|1[012])月/i,wide:/^([123456789]|1[012])月/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^1\D/,/^2/,/^3/,/^4/,/^5/,/^6/,/^7/,/^8/,/^9/,/^10/,/^11/,/^12/]},defaultParseWidth:"any"}),day:(0,L.buildMatchFn)({matchPatterns:{narrow:/^[日月火水木金土]/,short:/^[日月火水木金土]/,abbreviated:/^[日月火水木金土]/,wide:/^[日月火水木金土]曜日/},defaultMatchWidth:"wide",parsePatterns:{any:[/^日/,/^月/,/^火/,/^水/,/^木/,/^金/,/^土/]},defaultParseWidth:"any"}),dayPeriod:(0,L.buildMatchFn)({matchPatterns:{any:/^(AM|PM|午前|午後|正午|深夜|真夜中|夜|朝)/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^(A|午前)/i,pm:/^(P|午後)/i,midnight:/^深夜|真夜中/i,noon:/^正午/i,morning:/^朝/i,afternoon:/^午後/i,evening:/^夜/i,night:/^深夜/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function N(){let{user:a}=(0,p.useAuth)(),{notifications:c,unreadCount:e}=function(a){let[b,c]=(0,s.useState)([]),[d,e]=(0,s.useState)(0),[f,g]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{if(!a){c([]),e(0),g(!1);return}let b=(0,r.query)((0,r.collection)(q.db,"notifications"),(0,r.where)("userId","==",a),(0,r.orderBy)("createdAt","desc"),(0,r.limit)(20)),d=(0,r.onSnapshot)(b,a=>{let b=a.docs.map(a=>({id:a.id,...a.data()}));c(b),e(b.filter(a=>!a.read).length),g(!1)});return()=>d()},[a]),{notifications:b,unreadCount:d,loading:f}}(a?.id),[f,g]=(0,s.useState)(!1),h=(0,d.useRouter)(),i=(0,s.useRef)(null);(0,s.useEffect)(()=>{function a(a){i.current&&!i.current.contains(a.target)&&g(!1)}return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[i]);let j=async a=>{a.read||await t.markAsRead(a.id),g(!1),a.link&&h.push(a.link)},k=async()=>{a&&await t.markAllAsRead(a.id)};return a?(0,b.jsxs)("div",{className:"relative",ref:i,children:[(0,b.jsxs)("button",{className:"relative p-2 text-gray-500 hover:text-gray-700 transition-colors",onClick:()=>g(!f),children:[(0,b.jsx)(u,{size:24}),e>0&&(0,b.jsx)("span",{className:"absolute top-0 right-0 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-bold leading-none text-red-100 bg-red-600 rounded-full transform translate-x-1/4 -translate-y-1/4",children:e>9?"9+":e})]}),f&&(0,b.jsxs)("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-xl border border-gray-100 z-50 overflow-hidden",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center px-4 py-2 border-b bg-gray-50",children:[(0,b.jsx)("h3",{className:"text-sm font-bold text-gray-700",children:"通知"}),e>0&&(0,b.jsxs)("button",{onClick:k,className:"text-xs text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[(0,b.jsx)(v,{size:12}),"すべて既読にする"]})]}),(0,b.jsx)("div",{className:"max-h-96 overflow-y-auto",children:0===c.length?(0,b.jsx)("div",{className:"p-8 text-center text-gray-400 text-sm",children:"通知はありません"}):(0,b.jsx)("ul",{className:"divide-y divide-gray-100",children:c.map(a=>{var c,d;return(0,b.jsx)("li",{className:`p-3 hover:bg-gray-50 cursor-pointer transition-colors ${!a.read?"bg-blue-50/50":""}`,onClick:()=>j(a),children:(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("div",{className:"mt-1",children:a.read?(0,b.jsx)("div",{className:"w-2 h-2 bg-gray-300 rounded-full"}):(0,b.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-800 mb-1",children:a.title}),(0,b.jsx)("p",{className:"text-xs text-gray-500 line-clamp-2 mb-1",children:a.message}),(0,b.jsx)("p",{className:"text-[10px] text-gray-400",children:a.createdAt?(c=a.createdAt.toDate(),d={addSuffix:!0,locale:M},function(a,b,c){var d;let e,f=(0,y.getDefaultOptions)(),g=c?.locale??f.locale??x.defaultLocale,h=C(a,b);if(isNaN(h))throw RangeError("Invalid time value");let i=Object.assign({},c,{addSuffix:c?.addSuffix,comparison:h}),[j,k]=(0,A.normalizeDates)(c?.in,...h>0?[b,a]:[a,b]),l=(d=void 0,a=>{let b=(d?Math[d]:Math.trunc)(a);return 0===b?0:b})(((0,B.toDate)(k)-(0,B.toDate)(j))/1e3),m=Math.round((l-((0,z.getTimezoneOffsetInMilliseconds)(k)-(0,z.getTimezoneOffsetInMilliseconds)(j))/1e3)/60);if(m<2)if(c?.includeSeconds)if(l<5)return g.formatDistance("lessThanXSeconds",5,i);else if(l<10)return g.formatDistance("lessThanXSeconds",10,i);else if(l<20)return g.formatDistance("lessThanXSeconds",20,i);else if(l<40)return g.formatDistance("halfAMinute",0,i);else if(l<60)return g.formatDistance("lessThanXMinutes",1,i);else return g.formatDistance("xMinutes",1,i);else if(0===m)return g.formatDistance("lessThanXMinutes",1,i);else return g.formatDistance("xMinutes",m,i);if(m<45)return g.formatDistance("xMinutes",m,i);if(m<90)return g.formatDistance("aboutXHours",1,i);if(m<D.minutesInDay){let a=Math.round(m/60);return g.formatDistance("aboutXHours",a,i)}if(m<2520)return g.formatDistance("xDays",1,i);else if(m<D.minutesInMonth){let a=Math.round(m/D.minutesInDay);return g.formatDistance("xDays",a,i)}else if(m<2*D.minutesInMonth)return e=Math.round(m/D.minutesInMonth),g.formatDistance("aboutXMonths",e,i);if((e=function(a,b,c){var d,e;let f,g,h,i,[j,k,l]=(0,A.normalizeDates)(void 0,a,a,b),m=C(k,l),n=Math.abs(function(a,b,c){let[d,e]=(0,A.normalizeDates)(void 0,a,b);return 12*(d.getFullYear()-e.getFullYear())+(d.getMonth()-e.getMonth())}(k,l));if(n<1)return 0;1===k.getMonth()&&k.getDate()>27&&k.setDate(30),k.setMonth(k.getMonth()-m*n);let o=C(k,l)===-m;+(f=(0,B.toDate)(j,void 0),d=void 0,(g=(0,B.toDate)(f,d?.in)).setHours(23,59,59,999),g)==+(e=void 0,i=(h=(0,B.toDate)(f,e?.in)).getMonth(),h.setFullYear(h.getFullYear(),i+1,0),h.setHours(23,59,59,999),h)&&1===n&&1===C(j,l)&&(o=!1);let p=m*(n-o);return 0===p?0:p}(k,j))<12){let a=Math.round(m/D.minutesInMonth);return g.formatDistance("xMonths",a,i)}{let a=e%12,b=Math.trunc(e/12);return a<3?g.formatDistance("aboutXYears",b,i):a<9?g.formatDistance("overXYears",b,i):g.formatDistance("almostXYears",b+1,i)}}(c,(0,w.constructFrom)(c,Date.now()),d)):"-"})]})]})},a.id)})})}),(0,b.jsx)("div",{className:"p-2 border-t bg-gray-50 text-center",children:(0,b.jsx)("button",{onClick:()=>h.push("/settings/notifications"),className:"text-xs text-gray-500 hover:text-gray-700",children:"通知設定"})})]})]}):null}function O(){let{user:a}=(0,p.useAuth)();return(0,b.jsxs)("header",{className:"sticky top-0 z-30 w-full h-16 px-6 flex items-center justify-between glass border-b-0 rounded-2xl mx-auto max-w-[98%] mt-2",children:[(0,b.jsx)("div",{className:"flex items-center gap-4 flex-1",children:(0,b.jsxs)("div",{className:"relative w-64 md:w-96 hidden md:block",children:[(0,b.jsx)(h,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,b.jsx)("input",{type:"text",placeholder:"検索...",className:"w-full h-10 pl-10 pr-4 rounded-full bg-white/50 border-none focus:ring-2 focus:ring-[#161B33]/20 text-sm shadow-sm backdrop-blur-sm transition-all"})]})}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(N,{}),(0,b.jsxs)("div",{className:"flex items-center gap-3 pl-4 border-l border-gray-200",children:[(0,b.jsxs)("div",{className:"text-right hidden sm:block",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-[#161B33]",children:a?.name||"ゲスト"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:a?.role==="student"?"学生アカウント":a?.role==="company"?"企業アカウント":a?.role==="admin"?"管理者":"ゲスト"})]}),(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-[#161B33] to-[#2D5A8E] shadow-md border-2 border-white cursor-pointer"})]})]})]})}function P({children:a}){return(0,b.jsxs)("div",{className:"min-h-screen text-[#161B33] font-sans",children:[(0,b.jsx)(o,{}),(0,b.jsxs)("div",{className:"pl-24 flex flex-col min-h-screen transition-all duration-300",children:[(0,b.jsx)(O,{}),(0,b.jsx)("main",{className:"flex-1 p-6 md:p-8 overflow-x-hidden",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:a})})]})]})}a.s(["MainLayout",()=>P],92755)}];

//# sourceMappingURL=src_components_layout_MainLayout_tsx_f4bd9bae._.js.map