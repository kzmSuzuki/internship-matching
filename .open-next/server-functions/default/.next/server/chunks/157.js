"use strict";exports.id=157,exports.ids=[157],exports.modules={50820:(e,t,a)=>{a.d(t,{Z:()=>r});let r=(0,a(9148).Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},20290:(e,t,a)=>{a.d(t,{Z:()=>r});let r=(0,a(9148).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},90526:(e,t,a)=>{a.d(t,{Z:()=>r});let r=(0,a(9148).Z)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]])},74652:(e,t,a)=>{a.d(t,{B:()=>x});var r=a(97247),s=a(28964),l=a(17596),n=a(55039),c=a(62752);let d=(0,a(9148).Z)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);var o=a(20290),i=a(40677);function x({evaluation:e,onSubmit:t,isSubmitting:a,userRole:x,targetName:m}){let[h,p]=(0,s.useState)(0),[u,y]=(0,s.useState)(""),[b,g]=(0,s.useState)(0);return e?(0,r.jsxs)(l.Z,{className:"overflow-hidden border-none shadow-lg rounded-2xl p-0",children:[(0,r.jsxs)("div",{className:"bg-[#1E3A5F] text-white p-5 text-center",children:[r.jsx("h3",{className:"font-bold text-lg mb-1",children:"評価完了"}),r.jsx("p",{className:"text-xs opacity-80",children:"Thank you for your feedback!"})]}),(0,r.jsxs)("div",{className:"p-6 space-y-6 bg-white",children:[(0,r.jsxs)("div",{className:"text-center space-y-2",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-2",children:r.jsx(c.Z,{className:"w-8 h-8 text-green-600"})}),r.jsx("h4",{className:"font-bold text-xl text-gray-800",children:"送信済み"}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:[m," への評価を送信しました。",r.jsx("br",{}),"ご協力ありがとうございました。"]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-xl space-y-3 border border-gray-100",children:[(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Score"}),(0,r.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[[1,2,3,4,5].map(t=>r.jsx(d,{className:(0,i.cn)("w-6 h-6 fill-current transition-colors",t<=e.score?"text-amber-400":"text-gray-200")},t)),(0,r.jsxs)("span",{className:"ml-2 font-bold text-lg text-gray-700",children:[e.score,".0"]})]})]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Comment"}),r.jsx("p",{className:"text-sm text-gray-700 mt-1 whitespace-pre-wrap leading-relaxed",children:e.comment})]})]})]})]}):(0,r.jsxs)(l.Z,{className:"overflow-hidden border-none shadow-lg rounded-2xl p-0",children:[(0,r.jsxs)("div",{className:"bg-[#1E3A5F] text-white p-5 text-center",children:[r.jsx("h3",{className:"font-bold text-lg mb-1",children:"インターンシップ評価"}),r.jsx("p",{className:"text-xs opacity-80",children:"student"===x?"企業へのフィードバックをお願いします":"学生への最終評価を入力してください"})]}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t(h,u)},className:"p-6 space-y-6 bg-white",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"総合評価 (Score)"}),r.jsx("div",{className:"flex justify-center gap-2",children:[1,2,3,4,5].map(e=>r.jsx("button",{type:"button",className:"focus:outline-none transition-transform hover:scale-110 active:scale-95",onMouseEnter:()=>g(e),onMouseLeave:()=>g(0),onClick:()=>p(e),children:r.jsx(d,{className:(0,i.cn)("w-6 h-6 fill-current transition-colors duration-200",e<=(b||h)?"text-amber-400":"text-gray-200")})},e))}),r.jsx("p",{className:"text-sm text-amber-600 font-medium h-5 mt-2 transition-opacity duration-200",children:5===b||5===h?"非常に素晴らしい":4===b||4===h?"満足している":3===b||3===h?"普通":2===b||2===h?"改善の余地あり":1===b||1===h?"不満がある":""})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"コメント・フィードバック"}),r.jsx("textarea",{className:"w-full border-2 border-gray-100 rounded-xl p-4 min-h-[120px] focus:border-[#1E3A5F] focus:ring-0 transition-colors text-sm resize-none bg-gray-50 focus:bg-white",value:u,onChange:e=>y(e.target.value),required:!0,placeholder:"student"===x?"学んだこと、良かった点、改善点など...":"学生の成果、取り組み姿勢へのメッセージ..."})]})]}),(0,r.jsxs)("div",{className:"pt-2",children:[0===h?(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2 text-amber-600 text-xs bg-amber-50 p-3 rounded-lg border border-amber-100 mb-4",children:[r.jsx(o.Z,{size:14}),r.jsx("span",{children:"評価スコアを選択してください"})]}):null,r.jsx(n.z,{type:"submit",className:"w-full py-6 font-bold text-lg shadow-md hover:shadow-lg transition-all",isLoading:a,disabled:0===h||!u.trim(),children:"評価を送信する"}),r.jsx("p",{className:"text-xs text-center text-gray-400 mt-3",children:"※ 送信後の変更はできません"})]})]})]})}},76219:(e,t,a)=>{a.d(t,{C:()=>n});var r=a(97247),s=a(28964),l=a(40677);let n=(0,s.forwardRef)(({className:e,variant:t="default",...a},s)=>r.jsx("span",{ref:s,className:(0,l.cn)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium transition-colors",{default:"bg-[#1E3A5F]/10 text-[#161B33]",success:"bg-[#48BB78]/10 text-[#48BB78]",warning:"bg-[#ED8936]/10 text-[#ED8936]",error:"bg-[#F56565]/10 text-[#F56565]",outline:"border border-gray-200 text-gray-500"}[t],e),...a}));n.displayName="Badge"},16304:(e,t,a)=>{a.d(t,{i:()=>n});var r=a(94082),s=a(62216);class l{async createReport(e,t,a,l,n,c){try{return(await (0,s.ET)((0,s.hJ)(r.db,"dailyReports"),{matchId:t,studentId:e,date:s.EK.fromDate(c),content:a,learning:l,nextGoals:n,createdAt:(0,s.Bt)(),updatedAt:(0,s.Bt)()})).id}catch(e){throw console.error("createReport error:",e),e}}async getReports(e){try{try{let t=(0,s.IO)((0,s.hJ)(r.db,"dailyReports"),(0,s.ar)("matchId","==",e),(0,s.Xo)("date","desc"));return(await (0,s.PL)(t)).docs.map(e=>({id:e.id,...e.data()}))}catch(t){if("failed-precondition"===t.code||t.message?.includes("index")){console.warn("Index missing for getReports, falling back to client-side sort");let t=(0,s.IO)((0,s.hJ)(r.db,"dailyReports"),(0,s.ar)("matchId","==",e));return(await (0,s.PL)(t)).docs.map(e=>({id:e.id,...e.data()})).sort((e,t)=>{let a=e.date?.toMillis?e.date.toMillis():e.date instanceof Date?e.date.getTime():0;return(t.date?.toMillis?t.date.toMillis():t.date instanceof Date?t.date.getTime():0)-a})}throw t}}catch(e){throw console.error("getReports error:",e),e}}async addCompanyComment(e,t){try{let a=(0,s.JU)(r.db,"dailyReports",e);await (0,s.r7)(a,{companyComment:t,updatedAt:(0,s.Bt)()})}catch(e){throw console.error("addCompanyComment error:",e),e}}async getMatch(e){try{let t=await (0,s.QT)((0,s.JU)(r.db,"matches",e));if(t.exists())return{id:t.id,...t.data()};return null}catch(e){throw console.error("getMatch error:",e),e}}async completeInternship(e){try{await (0,s.r7)((0,s.JU)(r.db,"matches",e),{status:"completed",endDate:(0,s.Bt)()})}catch(e){throw console.error("completeInternship error:",e),e}}async submitEvaluation(e,t,a,l,n){try{await (0,s.ET)((0,s.hJ)(r.db,"evaluations"),{matchId:e,fromId:t,toId:a,score:l,comment:n,createdAt:(0,s.Bt)()})}catch(e){throw console.error("submitEvaluation error:",e),e}}async getEvaluation(e,t){try{let a=(0,s.IO)((0,s.hJ)(r.db,"evaluations"),(0,s.ar)("matchId","==",e),(0,s.ar)("fromId","==",t)),l=await (0,s.PL)(a);if(!l.empty)return{id:l.docs[0].id,...l.docs[0].data()};return null}catch(e){throw console.error("getEvaluation error:",e),e}}}let n=new l}};