exports.id=783,exports.ids=[783],exports.modules={92862:(t,e,a)=>{Promise.resolve().then(a.t.bind(a,63642,23)),Promise.resolve().then(a.t.bind(a,87586,23)),Promise.resolve().then(a.t.bind(a,47838,23)),Promise.resolve().then(a.t.bind(a,58057,23)),Promise.resolve().then(a.t.bind(a,77741,23)),Promise.resolve().then(a.t.bind(a,13118,23))},21073:(t,e,a)=>{Promise.resolve().then(a.bind(a,222))},41322:(t,e,a)=>{Promise.resolve().then(a.bind(a,64259))},64259:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>g});var s=a(97247),i=a(222),r=a(34178),n=a(28964),o=a(79906),d=a(8749),l=a(21697),c=a(42310),p=a(66903),u=a(31500),m=a(57989),h=a(77256),b=a(19400),x=a(55039);function g({children:t}){let{user:e,loading:a,logout:o}=(0,i.a)();(0,r.useRouter)();let[g,w]=(0,n.useState)(!1);return a||!g?s.jsx("div",{className:"h-screen flex items-center justify-center",children:s.jsx(d.Z,{className:"animate-spin"})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-100 flex",children:[(0,s.jsxs)("aside",{className:"w-64 bg-[#1E3A5F] text-white flex flex-col fixed h-full",children:[(0,s.jsxs)("div",{className:"p-6 border-b border-white/10",children:[s.jsx("h1",{className:"text-xl font-bold",children:"Admin Console"}),s.jsx("p",{className:"text-xs opacity-70 mt-1",children:"インターンシップ管理"})]}),(0,s.jsxs)("nav",{className:"flex-1 p-4 space-y-2",children:[s.jsx(f,{href:"/admin/dashboard",icon:s.jsx(l.Z,{size:18}),label:"ダッシュボード"}),s.jsx(f,{href:"/admin/jobs",icon:s.jsx(c.Z,{size:18}),label:"求人管理"}),s.jsx(f,{href:"/admin/applications",icon:s.jsx(p.Z,{size:18}),label:"応募承認"}),s.jsx(f,{href:"/admin/matches",icon:s.jsx(u.Z,{size:18}),label:"インターン実施状況"}),s.jsx("div",{className:"pt-4 pb-2 text-xs font-bold opacity-50 uppercase tracking-widest",children:"Management"}),s.jsx(f,{href:"/admin/users",icon:s.jsx(m.Z,{size:18}),label:"ユーザー管理"}),s.jsx(f,{href:"/admin/companies",icon:s.jsx(h.Z,{size:18}),label:"企業管理"})]}),s.jsx("div",{className:"p-4 border-t border-white/10",children:(0,s.jsxs)(x.z,{variant:"ghost",className:"w-full justify-start text-white hover:bg-white/10 hover:text-white",onClick:o,children:[s.jsx(b.Z,{size:18,className:"mr-2"}),"ログアウト"]})})]}),s.jsx("main",{className:"ml-64 flex-1 p-8",children:t})]})}function f({href:t,icon:e,label:a}){return(0,s.jsxs)(o.default,{href:t,className:"flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-white/10 transition-colors",children:[e,s.jsx("span",{children:a})]})}},55039:(t,e,a)=>{"use strict";a.d(e,{z:()=>o});var s=a(97247),i=a(28964),r=a(40677),n=a(8749);let o=(0,i.forwardRef)(({className:t,variant:e="primary",size:a="md",isLoading:i,children:o,disabled:d,...l},c)=>(0,s.jsxs)("button",{ref:c,className:(0,r.cn)("inline-flex items-center justify-center rounded-lg font-medium transition-all focus:outline-none focus:ring-2 focus:ring-[#1E3A5F]/50 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-gradient-to-r from-[#161B33] to-[#142841] text-white shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all duration-300 border border-white/10",secondary:"glass-button text-[#1E3A5F] bg-white/40 hover:bg-white/60",outline:"glass-button border border-[#1E3A5F]/30 text-[#1E3A5F] hover:bg-[#1E3A5F]/5",ghost:"text-[#1E3A5F] hover:bg-[#1E3A5F]/10",danger:"glass-button bg-gradient-to-r from-[#F56565] to-[#E53E3E] text-white border-0"}[e],{sm:"h-8 px-3 text-sm",md:"h-10 px-4 py-2",lg:"h-12 px-6 text-lg"}[a],t),disabled:d||i,...l,children:[i&&s.jsx(n.Z,{className:"mr-2 h-4 w-4 animate-spin"}),o]}));o.displayName="Button"},17596:(t,e,a)=>{"use strict";a.d(e,{Z:()=>n});var s=a(97247),i=a(28964),r=a(40677);let n=(0,i.forwardRef)(({className:t,...e},a)=>s.jsx("div",{ref:a,className:(0,r.cn)("glass rounded-2xl p-6 transition-all duration-300",t),...e}));n.displayName="Card"},222:(t,e,a)=>{"use strict";a.d(e,{AuthProvider:()=>c,a:()=>p});var s=a(97247),i=a(28964),r=a(85503),n=a(62216),o=a(94082),d=a(34178);let l=(0,i.createContext)({user:null,firebaseUser:null,loading:!0,emailVerified:!1,logout:async()=>{},refreshUser:async()=>{}});function c({children:t}){let[e,a]=(0,i.useState)(null),[c,p]=(0,i.useState)(null),[u,m]=(0,i.useState)(!0),[h,b]=(0,i.useState)(!1),x=(0,d.useRouter)(),g=async t=>{try{let e=await (0,n.QT)((0,n.JU)(o.db,"users",t.uid));e.exists()?a({id:e.id,...e.data()}):a(null)}catch(t){console.error("Error fetching user data:",t),a(null)}},f=async()=>{await (0,r.w7)(o.I),a(null),p(null),b(!1),x.push("/login")},w=async()=>{let t=o.I.currentUser;t&&(await t.reload(),b(t.emailVerified),await g(t))};return s.jsx(l.Provider,{value:{user:e,firebaseUser:c,loading:u,emailVerified:h,logout:f,refreshUser:w},children:t})}let p=()=>(0,i.useContext)(l)},94082:(t,e,a)=>{"use strict";a.d(e,{I:()=>o,V:()=>l,db:()=>d});var s=a(68132),i=a(85503),r=a(62216);let n=0===(0,s.C6)().length?(0,s.ZF)({apiKey:"AIzaSyDL2GylAt2YVRSstEpp4hucbcqw7RuVk4o",authDomain:"internship-matching-app.firebaseapp.com",projectId:"internship-matching-app",messagingSenderId:"299078518812",appId:"1:299078518812:web:03ad34bb4323c497a677d9"}):(0,s.C6)()[0],o=(0,i.v0)(n),d=(0,r.ad)(n),l=new i.hJ},67413:(t,e,a)=>{"use strict";async function s(t,e,a){try{let s=await fetch("/api/send-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:t,subject:e,body:a})});if(!s.ok)return console.error("Failed to send email:",await s.text()),!1;return!0}catch(t){return console.error("Error sending email:",t),!1}}a.d(e,{C:()=>s})},40677:(t,e,a)=>{"use strict";a.d(e,{cn:()=>r});var s=a(61929),i=a(35770);function r(...t){return(0,i.m6)((0,s.W)(t))}},57793:(t,e,a)=>{"use strict";a.d(e,{d:()=>d});var s=a(94082),i=a(62216),r=a(95525),n=a(67413);class o{async getUserEmail(t){try{let e=await (0,i.QT)((0,i.JU)(s.db,"users",t));if(e.exists())return e.data().email}catch(t){console.error("Error fetching user email:",t)}return null}async getStats(){try{let t=(0,i.hJ)(s.db,"users"),e=(0,i.hJ)(s.db,"companies"),a=(0,i.hJ)(s.db,"jobPostings"),r=(0,i.hJ)(s.db,"applications"),n=(0,i.hJ)(s.db,"matches"),o=await (0,i.Yp)((0,i.IO)(t,(0,i.ar)("role","==","student"))),d=await (0,i.Yp)(e),l=await (0,i.Yp)((0,i.IO)(a,(0,i.ar)("status","==","pending_approval"))),c=await (0,i.Yp)((0,i.IO)(a,(0,i.ar)("status","==","published"))),p=await (0,i.Yp)((0,i.IO)(r,(0,i.ar)("status","==","pending_admin"))),u=await (0,i.Yp)(n),m=await (0,i.Yp)((0,i.IO)(e,(0,i.ar)("isApproved","==",!1)));return{totalUsers:o.data().count,totalCompanies:d.data().count,pendingCompanies:m.data().count,pendingJobs:l.data().count,activeJobs:c.data().count,pendingApplications:p.data().count,totalMatches:u.data().count}}catch(t){throw console.error("AdminService.getStats error:",t),t}}async getPendingJobs(){try{let t=(0,i.IO)((0,i.hJ)(s.db,"jobPostings"),(0,i.ar)("status","==","pending_approval"),(0,i.Xo)("createdAt","asc"));return(await (0,i.PL)(t)).docs.map(t=>({id:t.id,...t.data()}))}catch(t){if("failed-precondition"===t.code||t.message?.includes("index")){console.warn("Composite index missing for getPendingJobs, falling back to unordered query. Create the index in Firebase Console.");let t=(0,i.IO)((0,i.hJ)(s.db,"jobPostings"),(0,i.ar)("status","==","pending_approval"));return(await (0,i.PL)(t)).docs.map(t=>({id:t.id,...t.data()})).sort((t,e)=>(t.createdAt?.toMillis?.()??0)-(e.createdAt?.toMillis?.()??0))}throw t}}async getAllJobs(){let t=(0,i.IO)((0,i.hJ)(s.db,"jobPostings"),(0,i.Xo)("createdAt","desc"));return(await (0,i.PL)(t)).docs.map(t=>({id:t.id,...t.data()}))}async approveJob(t){let e=(0,i.JU)(s.db,"jobPostings",t),a=await (0,i.QT)(e);if(!a.exists())return;let o=a.data();if(await (0,i.r7)(e,{status:"published",updatedAt:(0,i.Bt)()}),o?.companyId){await r.B.createNotification(o.companyId,"求人が承認されました",`求人「${o.title}」が公開されました。`,"job_approved_admin",`/company/jobs/${t}`);let e=await this.getUserEmail(o.companyId);e&&await (0,n.C)(e,"【Internship Match】求人公開のお知らせ",`求人「${o.title}」が承認され、公開されました。

マイページから確認できます。`)}}async rejectJob(t){let e=(0,i.JU)(s.db,"jobPostings",t),a=await (0,i.QT)(e),o=a.exists()?a.data():null;if(await (0,i.r7)(e,{status:"draft",updatedAt:(0,i.Bt)()}),o?.companyId){await r.B.createNotification(o.companyId,"求人が差し戻されました",`求人「${o.title}」の内容を確認してください。`,"system",`/company/jobs/${t}`);let e=await this.getUserEmail(o.companyId);e&&await (0,n.C)(e,"【Internship Match】求人差し戻しのお知らせ",`求人「${o.title}」が差し戻されました。
理由を確認し、内容を修正してください。`)}}async getAllCompanies(){return(await (0,i.PL)((0,i.hJ)(s.db,"companies"))).docs.map(t=>({userId:t.id,...t.data()}))}async approveCompany(t){await (0,i.r7)((0,i.JU)(s.db,"companies",t),{isApproved:!0,updatedAt:(0,i.Bt)()}),await r.B.createNotification(t,"企業アカウントが承認されました","アカウント審査が完了しました。求人の作成が可能です。","system","/company/dashboard");let e=await this.getUserEmail(t);e&&await (0,n.C)(e,"【Internship Match】企業アカウント承認のお知らせ",`アカウント審査が完了しました。
本日より求人の作成が可能になります。

ダッシュボードにログインしてご利用を開始してください。`)}async revokeCompany(t){await (0,i.r7)((0,i.JU)(s.db,"companies",t),{isApproved:!1,updatedAt:(0,i.Bt)()})}async getPendingApplications(){try{let t=(0,i.IO)((0,i.hJ)(s.db,"applications"),(0,i.ar)("status","==","pending_admin"),(0,i.Xo)("createdAt","asc"));return(await (0,i.PL)(t)).docs.map(t=>({id:t.id,...t.data()}))}catch(t){if("failed-precondition"===t.code||t.message?.includes("index")){console.warn("Composite index missing for getPendingApplications, falling back.");let t=(0,i.IO)((0,i.hJ)(s.db,"applications"),(0,i.ar)("status","==","pending_admin"));return(await (0,i.PL)(t)).docs.map(t=>({id:t.id,...t.data()})).sort((t,e)=>(t.createdAt?.toMillis?.()??0)-(e.createdAt?.toMillis?.()??0))}throw t}}async getApplicationDetails(t){let e=await (0,i.QT)((0,i.JU)(s.db,"jobPostings",t.jobId)),a=await (0,i.QT)((0,i.JU)(s.db,"students",t.studentId)),r=await (0,i.QT)((0,i.JU)(s.db,"companies",t.companyId));return{job:e.exists()?e.data():null,student:a.exists()?a.data():null,company:r.exists()?r.data():null}}async approveApplication(t){}async getAllMatches(){try{let t=(0,i.IO)((0,i.hJ)(s.db,"matches"),(0,i.Xo)("createdAt","desc")),e=(await (0,i.PL)(t)).docs.map(t=>({id:t.id,...t.data()}));return await Promise.all(e.map(async t=>{let e=await (0,i.QT)((0,i.JU)(s.db,"students",t.studentId)),a=await (0,i.QT)((0,i.JU)(s.db,"companies",t.companyId)),r=await (0,i.QT)((0,i.JU)(s.db,"jobPostings",t.jobId));return{...t,studentName:e.exists()?e.data().name:"退会済みユーザー",companyName:a.exists()?a.data().name:"不明な企業",jobTitle:r.exists()?r.data().title:"削除された求人"}}))}catch(t){throw console.error("getAllMatches error:",t),t}}async getMatchEvaluations(t){try{let e=(0,i.IO)((0,i.hJ)(s.db,"evaluations"),(0,i.ar)("matchId","==",t));return(await (0,i.PL)(e)).docs.map(t=>({id:t.id,...t.data()}))}catch(t){return console.error(t),[]}}}let d=new o},95525:(t,e,a)=>{"use strict";a.d(e,{B:()=>n});var s=a(94082),i=a(62216);a(28964);class r{async markAsRead(t){let e=(0,i.JU)(s.db,"notifications",t);await (0,i.r7)(e,{read:!0,updatedAt:(0,i.Bt)()})}async markAllAsRead(t){let e=(0,i.IO)((0,i.hJ)(s.db,"notifications"),(0,i.ar)("userId","==",t),(0,i.ar)("read","==",!1)),a=await (0,i.PL)(e);if(a.empty)return;let r=(0,i.qs)(s.db);a.docs.forEach(t=>{r.update(t.ref,{read:!0,updatedAt:(0,i.Bt)()})}),await r.commit()}async createNotification(t,e,a,r,n){try{await (0,i.ET)((0,i.hJ)(s.db,"notifications"),{userId:t,title:e,message:a,type:r,link:n,read:!1,createdAt:(0,i.Bt)()})}catch(t){console.error("Error creating notification:",t)}}}let n=new r},5519:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>s});let s=(0,a(45347).createProxy)(String.raw`/Users/kazuma/Documents/dev/intern/internship-matching/src/app/(admin)/admin/layout.tsx#default`)},15539:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>l,metadata:()=>d});var s=a(72051),i=a(23635),r=a.n(i);a(5023);var n=a(45347);let o=(0,n.createProxy)(String.raw`/Users/kazuma/Documents/dev/intern/internship-matching/src/contexts/AuthContext.tsx#AuthProvider`);(0,n.createProxy)(String.raw`/Users/kazuma/Documents/dev/intern/internship-matching/src/contexts/AuthContext.tsx#useAuth`);let d={title:"Internship Matching",description:"Internship Matching Platform"};function l({children:t}){return s.jsx("html",{lang:"ja",children:s.jsx("body",{className:r().className,children:s.jsx(o,{children:t})})})}},73881:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>i});var s=a(54564);let i=t=>[{type:"image/x-icon",sizes:"48x48",url:(0,s.fillMetadataSegment)(".",t.params,"favicon.ico")+""}]},5023:()=>{}};