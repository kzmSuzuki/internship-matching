(()=>{var e={};e.id=123,e.ids=[123],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},95256:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>p,tree:()=>c}),s(69076),s(5519),s(90996),s(15539);var a=s(30170),r=s(45002),i=s(83876),n=s.n(i),l=s(66299),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(t,d);let c=["",{children:["(admin)",{children:["admin",{children:["jobs",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,69076)),"/Users/kazuma/Documents/dev/intern/internship-matching/src/app/(admin)/admin/jobs/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,5519)),"/Users/kazuma/Documents/dev/intern/internship-matching/src/app/(admin)/admin/layout.tsx"]}]},{"not-found":[()=>Promise.resolve().then(s.t.bind(s,90996,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,15539)),"/Users/kazuma/Documents/dev/intern/internship-matching/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,90996,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],o=["/Users/kazuma/Documents/dev/intern/internship-matching/src/app/(admin)/admin/jobs/page.tsx"],x="/(admin)/admin/jobs/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(admin)/admin/jobs/page",pathname:"/admin/jobs",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},26342:(e,t,s)=>{Promise.resolve().then(s.bind(s,2927))},50820:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(9148).Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},32348:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(9148).Z)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},9527:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(9148).Z)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},94002:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(9148).Z)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},33841:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(9148).Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},2927:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var a=s(97247),r=s(28964),i=s(62216),n=s(94082),l=s(57793),d=s(17596),c=s(55039),o=s(76219),x=s(8749),m=s(77256),p=s(9527),u=s(50820),h=s(94002),g=s(33841),f=s(32348),b=s(8553),j=s(4193),v=s(79906);function y(){let[e,t]=(0,r.useState)([]),[s,y]=(0,r.useState)(!0),[N,w]=(0,r.useState)(null),[k,C]=(0,r.useState)(null),[q,z]=(0,r.useState)("all"),[F,P]=(0,r.useState)(""),Z=async e=>{if(confirm("この求人を承認して公開しますか？")){C(e);try{await l.d.approveJob(e),t(t=>t.map(t=>t.id===e?{...t,status:"published"}:t)),w(null)}catch(e){console.error(e),alert("承認に失敗しました")}finally{C(null)}}},_=async e=>{if(confirm("この求人を差し戻しますか？（下書き状態に戻ります）")){C(e);try{await l.d.rejectJob(e),t(t=>t.map(t=>t.id===e?{...t,status:"draft"}:t)),w(null)}catch(e){console.error(e),alert("差し戻しに失敗しました")}finally{C(null)}}},M=async e=>{let t=window.open("","_blank");t&&t.document.write('<div style="display:flex;justify-content:center;align-items:center;height:100vh;font-family:sans-serif;">Loading PDF...</div>'),C(`pdf-${e}`);try{if(!n.I.currentUser)return;let s=await n.I.currentUser.getIdToken(),a=await fetch(`/api/pdf/${e}`,{headers:{Authorization:`Bearer ${s}`}});if(!a.ok){let e=await a.json();throw Error(e.error||"PDFの取得に失敗しました")}let r=await a.blob(),i=URL.createObjectURL(r);t?t.location.href=i:window.open(i,"_blank")}catch(e){console.error(e),t&&t.close(),alert("PDFを表示できませんでした: "+e.message)}finally{C(null)}},A=async e=>{if(window.confirm("この求人を削除してもよろしいですか？取り消せません。"))try{await (0,i.oe)((0,i.JU)(n.db,"jobPostings",e)),t(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Delete error:",e),alert("削除に失敗しました")}},E=e.filter(e=>{let t=!0===e.isDeleted;if("pending"===q){if(t||"pending_approval"!==e.status)return!1}else if("published"===q&&(t||"published"!==e.status))return!1;if(F){let t=F.toLowerCase(),s=e.title.toLowerCase().includes(t),a=e.resolvedCompanyName?.toLowerCase().includes(t)||!1,r=e.location.toLowerCase().includes(t);return s||a||r}return!0});return s?a.jsx("div",{className:"flex justify-center p-12",children:a.jsx(x.Z,{className:"animate-spin text-[#1E3A5F]"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-[#1E3A5F]",children:"求人管理"}),a.jsx("p",{className:"text-gray-500",children:"全ての求人を管理・承認できます"})]}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 w-full md:w-auto",children:[a.jsx("input",{type:"text",placeholder:"求人名・企業名・場所で検索...",className:"border border-gray-300 rounded-lg px-4 py-2 text-sm w-full md:w-64 focus:outline-none focus:ring-2 focus:ring-[#1E3A5F]",value:F,onChange:e=>P(e.target.value)}),(0,a.jsxs)("div",{className:"flex bg-gray-100 p-1 rounded-lg self-start",children:[a.jsx("button",{className:`px-4 py-1.5 rounded-md text-sm font-medium transition-colors ${"pending"===q?"bg-white shadow text-[#1E3A5F]":"text-gray-500 hover:text-gray-700"}`,onClick:()=>z("pending"),children:"承認待ち"}),a.jsx("button",{className:`px-4 py-1.5 rounded-md text-sm font-medium transition-colors ${"published"===q?"bg-white shadow text-[#1E3A5F]":"text-gray-500 hover:text-gray-700"}`,onClick:()=>z("published"),children:"公開中"}),a.jsx("button",{className:`px-4 py-1.5 rounded-md text-sm font-medium transition-colors ${"all"===q?"bg-white shadow text-[#1E3A5F]":"text-gray-500 hover:text-gray-700"}`,onClick:()=>z("all"),children:"すべて"})]})]})]}),0===E.length?a.jsx(d.Z,{className:"p-12 text-center text-gray-500",children:"該当する求人はありません。"}):a.jsx("div",{className:"grid gap-4",children:E.map(e=>{let t=!0===e.isDeleted;return a.jsx(d.Z,{className:`p-6 ${t?"!bg-gray-300 !border-gray-400 !shadow-none !backdrop-blur-none":""}`,children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:["pending_approval"===e.status&&a.jsx(o.C,{variant:"warning",children:"承認待ち"}),"published"===e.status&&a.jsx(o.C,{variant:"success",children:"公開中"}),"draft"===e.status&&a.jsx(o.C,{variant:"outline",children:"下書き"}),"closed"===e.status&&a.jsx(o.C,{variant:"error",className:"bg-gray-100 text-gray-500",children:"終了"})]}),(0,a.jsxs)("h3",{className:"text-xl font-bold mb-1 flex items-center gap-2",children:[e.title,t&&a.jsx(o.C,{variant:"danger",className:"text-xs",children:"削除済み"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-4",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[a.jsx(m.Z,{size:14,className:"text-[#1E3A5F]"})," ",e.resolvedCompanyName]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[a.jsx(p.Z,{size:14})," ",e.location]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[a.jsx(u.Z,{size:14})," ",e.createdAt?.toDate?(0,b.WU)(e.createdAt.toDate(),"yyyy/MM/dd HH:mm"):"-"]})]}),a.jsx("div",{className:"flex gap-2 mb-2",children:e.requirements.map((e,t)=>a.jsx(o.C,{variant:"outline",className:"bg-gray-50",children:e},t))})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(v.default,{href:`/company/jobs/${e.id}/edit`,children:a.jsx(c.z,{variant:"secondary",size:"sm",className:"px-3",children:a.jsx(h.Z,{size:16})})})," ",a.jsx(c.z,{variant:"ghost",size:"sm",className:"text-red-500 hover:bg-red-50 px-3",onClick:()=>A(e.id),children:a.jsx(g.Z,{size:16})}),a.jsx(c.z,{variant:"outline",onClick:()=>w(e),children:"詳細確認"}),"pending_approval"===e.status&&a.jsx(c.z,{className:"bg-[#1E3A5F] hover:bg-[#16304F]",isLoading:k===e.id,onClick:()=>Z(e.id),children:"承認"})]})]})},e.id)})}),a.jsx(j.u,{isOpen:!!N,onClose:()=>w(null),title:"求人詳細",children:N&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-xl font-bold mb-2",children:N.title}),(0,a.jsxs)("div",{className:"flex gap-2 mb-4 items-center",children:["pending_approval"===N.status&&a.jsx(o.C,{variant:"warning",children:"承認待ち"}),"published"===N.status&&a.jsx(o.C,{variant:"success",children:"公開中"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600 flex items-center gap-1",children:[a.jsx(m.Z,{size:14,className:"text-[#1E3A5F]"}),N.resolvedCompanyName]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,a.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg",children:[a.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"勤務地"}),(0,a.jsxs)("p",{className:"flex items-center gap-1",children:[a.jsx(p.Z,{size:14})," ",N.location]})]}),N.salary&&(0,a.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg",children:[a.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"給与/待遇"}),a.jsx("p",{children:N.salary})]})]}),N.requirements.length>0&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"応募要件"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:N.requirements.map((e,t)=>a.jsx(o.C,{variant:"outline",className:"bg-gray-50",children:e},t))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"募集内容"}),a.jsx("div",{className:"p-4 bg-gray-50 rounded-lg whitespace-pre-wrap text-sm",children:N.content||"（テキスト説明なし）"}),N.pdfFileId&&a.jsx("div",{className:"mt-4 border-t pt-4",children:(0,a.jsxs)(c.z,{onClick:()=>M(N.pdfFileId),variant:"secondary",className:"w-full flex justify-center items-center gap-2",isLoading:k===`pdf-${N.pdfFileId}`,children:[a.jsx(f.Z,{size:16})," 募集要項PDFを確認する"]})})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t",children:["pending_approval"===N.status&&(0,a.jsxs)(a.Fragment,{children:[a.jsx(c.z,{variant:"outline",className:"text-[#F56565] border-[#F56565] hover:bg-[#F56565]/10",onClick:()=>_(N.id),isLoading:k===N.id,children:"差し戻し"}),a.jsx(c.z,{className:"bg-[#1E3A5F] hover:bg-[#16304F]",onClick:()=>Z(N.id),isLoading:k===N.id,children:"承認して公開"})]}),"published"===N.status&&a.jsx(c.z,{variant:"outline",onClick:()=>w(null),children:"閉じる"})]})]})})]})}},76219:(e,t,s)=>{"use strict";s.d(t,{C:()=>n});var a=s(97247),r=s(28964),i=s(40677);let n=(0,r.forwardRef)(({className:e,variant:t="default",...s},r)=>a.jsx("span",{ref:r,className:(0,i.cn)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium transition-colors",{default:"bg-[#1E3A5F]/10 text-[#161B33]",success:"bg-[#48BB78]/10 text-[#48BB78]",warning:"bg-[#ED8936]/10 text-[#ED8936]",error:"bg-[#F56565]/10 text-[#F56565]",outline:"border border-gray-200 text-gray-500"}[t],e),...s}));n.displayName="Badge"},4193:(e,t,s)=>{"use strict";s.d(t,{u:()=>l});var a=s(97247);s(28964);var r=s(46817);let i=(0,s(9148).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var n=s(40677);function l({isOpen:e,onClose:t,title:s,children:l,className:d}){return e?(0,r.createPortal)(a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6 bg-black/40 backdrop-blur-sm animate-in fade-in duration-200",children:(0,a.jsxs)("div",{className:(0,n.cn)("relative w-full max-w-lg transform rounded-2xl bg-white/80 backdrop-blur-2xl p-6 text-left align-middle shadow-2xl transition-all animate-in zoom-in-95 duration-200 border border-white/40",d),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[s&&a.jsx("h3",{className:"text-lg font-medium leading-6 text-[#161B33]",children:s}),a.jsx("button",{onClick:t,className:"rounded-full p-1 hover:bg-gray-100 transition-colors",children:a.jsx(i,{className:"h-5 w-5 text-gray-500"})})]}),a.jsx("div",{children:l})]})}),document.body):null}},69076:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(45347).createProxy)(String.raw`/Users/kazuma/Documents/dev/intern/internship-matching/src/app/(admin)/admin/jobs/page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[379,499,564,790,906,128,553,783],()=>s(95256));module.exports=a})();