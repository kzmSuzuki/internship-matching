(()=>{var e={};e.id=9,e.ids=[9],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},57255:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>o}),a(58161),a(52052),a(90996),a(15539);var s=a(30170),r=a(45002),i=a(83876),n=a.n(i),l=a(66299),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);a.d(t,d);let o=["",{children:["(student)",{children:["student",{children:["applications",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,58161)),"/Users/kazuma/Documents/dev/intern/internship-matching/src/app/(student)/student/applications/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,52052)),"/Users/kazuma/Documents/dev/intern/internship-matching/src/app/(student)/student/layout.tsx"]}]},{"not-found":[()=>Promise.resolve().then(a.t.bind(a,90996,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,15539)),"/Users/kazuma/Documents/dev/intern/internship-matching/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,90996,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/kazuma/Documents/dev/intern/internship-matching/src/app/(student)/student/applications/page.tsx"],u="/(student)/student/applications/page",p={require:a,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(student)/student/applications/page",pathname:"/student/applications",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},92862:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,63642,23)),Promise.resolve().then(a.t.bind(a,87586,23)),Promise.resolve().then(a.t.bind(a,47838,23)),Promise.resolve().then(a.t.bind(a,58057,23)),Promise.resolve().then(a.t.bind(a,77741,23)),Promise.resolve().then(a.t.bind(a,13118,23))},21073:(e,t,a)=>{Promise.resolve().then(a.bind(a,222))},68257:(e,t,a)=>{Promise.resolve().then(a.bind(a,80808))},17020:(e,t,a)=>{Promise.resolve().then(a.bind(a,64405))},62752:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(9148).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},9527:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(9148).Z)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},49256:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(9148).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},5271:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(9148).Z)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},80808:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var s=a(97247),r=a(28964);a(62216),a(94082);var i=a(222),n=a(17596),l=a(76219),d=a(55039),o=a(8749),c=a(77256),u=a(9527),p=a(96369),h=a(79906),m=a(34178),x=a(68170);function f(){let{user:e}=(0,i.a)(),[t,a]=(0,r.useState)([]),[f,g]=(0,r.useState)(!0),y=(0,m.useRouter)(),b=e=>{switch(e){case"pending_admin":return s.jsx(l.C,{variant:"warning",children:"管理者承認待ち"});case"pending_company":return s.jsx(l.C,{variant:"warning",children:"企業選考中"});case"pending_student":return s.jsx(l.C,{variant:"success",children:"マッチングオファー届いています！"});case"matched":return s.jsx(l.C,{variant:"success",className:"bg-green-500 text-white",children:"マッチング成立"});case"rejected_by_admin":case"rejected_by_company":return s.jsx(l.C,{variant:"error",children:"不採用"});case"cancelled":return s.jsx(l.C,{variant:"outline",children:"辞退/キャンセル"});default:return s.jsx(l.C,{variant:"outline",children:e})}},v=async t=>{if(e&&confirm("マッチングを承認しますか？\nこれでインターンシップが確定します。"))try{await x.v.acceptMatchByStudent(t,e.id),alert("マッチングが成立しました！"),g(!0),window.location.reload()}catch(e){console.error("Error accepting match:",e),alert("承認に失敗しました: "+e.message)}};return f?s.jsx("div",{className:"flex justify-center p-12",children:s.jsx(o.Z,{className:"animate-spin"})}):(0,s.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-[#1E3A5F]",children:"応募履歴"}),s.jsx("p",{className:"text-gray-500",children:"あなたの応募状況を確認できます"})]}),0===t.length?(0,s.jsxs)(n.Z,{className:"p-12 text-center text-gray-500",children:[s.jsx("p",{children:"まだ応募した求人はありません。"}),s.jsx(d.z,{className:"mt-4",onClick:()=>y.push("/student/jobs"),children:"求人を探す"})]}):s.jsx("div",{className:"space-y-4",children:t.map(e=>{let t=[{id:"pending_admin",label:"承認待ち"},{id:"pending_company",label:"企業選考"},{id:"pending_student",label:"オファー"},{id:"matched",label:"成立"}],a=-1;return"pending_admin"===e.status&&(a=0),"pending_company"===e.status&&(a=1),"pending_student"===e.status&&(a=2),("matched"===e.status||"completed"===e.status)&&(a=3),(e.status.includes("rejected")||"cancelled"===e.status)&&(a=-1),s.jsx(n.Z,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-between gap-6",children:[(0,s.jsxs)("div",{className:"space-y-4 flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("span",{className:"text-xs text-gray-400",children:["応募日: ",e.createdAt?(0,p.WU)(e.createdAt.toDate(),"yyyy/MM/dd HH:mm"):"-"]}),b(e.status)]}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-[#1E3A5F] mb-1",children:e.job.title||"求人削除済み"}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[s.jsx(c.Z,{size:14}),s.jsx("span",{children:e.company.name||"企業名不明"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[s.jsx(u.Z,{size:14}),s.jsx("span",{children:e.job.location})]})]})]}),a>=0&&s.jsx("div",{className:"pt-2 pb-6 px-4",children:(0,s.jsxs)("div",{className:"relative w-full",children:[s.jsx("div",{className:"absolute top-4 left-[12.5%] w-[75%] h-1 bg-gray-100 -translate-y-1/2 rounded-full"}),s.jsx("div",{className:"absolute top-4 left-[12.5%] h-1 bg-indigo-600 -translate-y-1/2 rounded-full transition-all duration-500",style:{width:`${a/(t.length-1)*75}%`}}),s.jsx("div",{className:"grid grid-cols-4 w-full",children:t.map((e,t)=>{let r=t<=a,i=t===a;return(0,s.jsxs)("div",{className:"relative z-10 flex flex-col items-center",children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold border-2 transition-colors ${r?"bg-indigo-600 border-indigo-600 text-white":"bg-white border-gray-200 text-gray-400"}`,children:t+1}),s.jsx("span",{className:`absolute top-10 text-[10px] whitespace-nowrap font-medium ${i?"text-indigo-700":"text-gray-400"}`,children:e.label})]},e.id)})})]})}),e.status.includes("rejected")&&(0,s.jsxs)("div",{className:"bg-red-50 p-3 rounded-lg text-sm text-red-600 flex items-start gap-2",children:[s.jsx("div",{className:"mt-0.5",children:"⚠️"}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"font-bold",children:"不採用となりました"}),s.jsx("p",{className:"text-xs opacity-80 mt-1",children:"残念ながら今回はご縁がありませんでした。他の求人も探してみましょう。"})]})]})]}),(0,s.jsxs)("div",{className:"flex flex-col items-end gap-3 min-w-[140px]",children:[s.jsx(h.default,{href:`/student/jobs/${e.jobId}`,children:s.jsx(d.z,{variant:"outline",size:"sm",className:"w-full",children:"求人詳細"})}),"pending_student"===e.status&&s.jsx(d.z,{variant:"primary",className:"bg-[#48BB78] hover:bg-[#48BB78]/90 w-full shadow-lg shadow-green-200",onClick:()=>v(e.id),children:"オファーを承諾"}),("matched"===e.status||"completed"===e.status)&&e.matchId&&s.jsx(h.default,{href:`/student/intern/${e.matchId}`,className:"w-full",children:s.jsx(d.z,{className:"bg-[#1E3A5F] w-full",children:"インターン画面へ"})})]})]})},e.id)})})]})}},64405:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var s=a(97247),r=a(91360);function i({children:e}){return s.jsx(r.Z,{children:e})}},91360:(e,t,a)=>{"use strict";a.d(t,{Z:()=>j});var s=a(97247),r=a(79906),i=a(34178),n=a(40677),l=a(222);let d=(0,a(9148).Z)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]]);var o=a(49256),c=a(66903),u=a(5271),p=a(21697),h=a(42310),m=a(57989),x=a(62752),f=a(77256),g=a(31500),y=a(19400);function b(){let e=(0,i.usePathname)(),{user:t,logout:a}=(0,l.a)(),b=(()=>{if(!t)return[];switch(t.role){case"student":return[{icon:d,label:"ホーム",href:"/"},{icon:o.Z,label:"求人検索",href:"/student/jobs"},{icon:c.Z,label:"応募履歴",href:"/student/applications"},{icon:u.Z,label:"プロフィール",href:"/student/profile"}];case"company":return[{icon:p.Z,label:"ダッシュボード",href:"/company/dashboard"},{icon:h.Z,label:"自社求人管理",href:"/company/jobs"},{icon:m.Z,label:"応募者管理",href:"/company/applicants"},{icon:u.Z,label:"企業情報",href:"/company/profile"}];case"admin":return[{icon:p.Z,label:"ダッシュボード",href:"/admin/dashboard"},{icon:x.Z,label:"求人承認",href:"/admin/jobs"},{icon:c.Z,label:"応募管理",href:"/admin/applications"},{icon:m.Z,label:"ユーザー管理",href:"/admin/users"},{icon:f.Z,label:"企業管理",href:"/admin/companies"},{icon:g.Z,label:"インターン実施状況",href:"/admin/matches"}];default:return[{icon:d,label:"ホーム",href:"/"}]}})();return(0,s.jsxs)("aside",{className:"fixed left-4 top-4 z-40 h-[calc(100vh-2rem)] w-18 glass rounded-2xl border-r-0 flex flex-col items-center py-6 transition-all duration-300",children:[s.jsx("div",{className:"mb-8 p-2 rounded-xl bg-[#161B33]/10",children:s.jsx("div",{className:"w-8 h-8 rounded-full bg-[#161B33]"})}),s.jsx("nav",{className:"flex-1 flex flex-col gap-4 w-full items-center px-2",children:b.map(t=>{let a=e===t.href||e.startsWith(t.href+"/");return(0,s.jsxs)(r.default,{href:t.href,className:(0,n.cn)("relative group flex items-center justify-center w-12 h-12 rounded-xl transition-all duration-200",a?"bg-[#161B33] text-white shadow-md shadow-[#161B33]/20":"text-gray-500 hover:bg-[#161B33]/10 hover:text-[#161B33]"),children:[s.jsx(t.icon,{size:22,strokeWidth:a?2.5:2}),s.jsx("span",{className:"absolute left-14 px-2 py-1 bg-[#1E3A5F] text-white text-xs rounded opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all whitespace-nowrap z-50",children:t.label})]},t.href)})}),s.jsx("button",{onClick:a,className:"mt-auto p-3 text-gray-500 hover:text-[#F56565] hover:bg-[#F56565]/10 rounded-xl transition-all",children:s.jsx(y.Z,{size:22})})]})}function v(){let{user:e}=(0,l.a)();return(0,s.jsxs)("header",{className:"sticky top-0 z-30 w-full flex justify-end px-6 mt-4 pointer-events-none",children:[s.jsx("div",{className:"hidden"}),s.jsx("div",{className:"flex items-center gap-4 glass px-6 py-2 rounded-2xl shadow-sm pointer-events-auto",children:(0,s.jsxs)(r.default,{href:e?.role==="student"?"/student/profile":e?.role==="company"?"/company/profile":"/",className:"flex items-center gap-3 pl-2 hover:opacity-80 transition-opacity",children:[(0,s.jsxs)("div",{className:"text-right hidden sm:block",children:[s.jsx("p",{className:"text-sm font-medium text-[#161B33]",children:e?.name||"ゲスト"}),s.jsx("p",{className:"text-xs text-gray-500",children:e?.role==="student"?"学生アカウント":e?.role==="company"?"企業アカウント":e?.role==="admin"?"管理者":"ゲスト"})]}),s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-[#161B33] to-[#2D5A8E] shadow-md border-2 border-white cursor-pointer"})]})})]})}function j({children:e}){return(0,s.jsxs)("div",{className:"min-h-screen text-[#161B33] font-sans",children:[s.jsx(b,{}),(0,s.jsxs)("div",{className:"pl-24 flex flex-col min-h-screen transition-all duration-300",children:[s.jsx(v,{}),s.jsx("main",{className:"flex-1 p-6 md:p-8 overflow-x-hidden",children:s.jsx("div",{className:"max-w-7xl mx-auto space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:e})})]})]})}},76219:(e,t,a)=>{"use strict";a.d(t,{C:()=>n});var s=a(97247),r=a(28964),i=a(40677);let n=(0,r.forwardRef)(({className:e,variant:t="default",...a},r)=>s.jsx("span",{ref:r,className:(0,i.cn)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium transition-colors",{default:"bg-[#1E3A5F]/10 text-[#161B33]",success:"bg-[#48BB78]/10 text-[#48BB78]",warning:"bg-[#ED8936]/10 text-[#ED8936]",error:"bg-[#F56565]/10 text-[#F56565]",outline:"border border-gray-200 text-gray-500"}[t],e),...a}));n.displayName="Badge"},55039:(e,t,a)=>{"use strict";a.d(t,{z:()=>l});var s=a(97247),r=a(28964),i=a(40677),n=a(8749);let l=(0,r.forwardRef)(({className:e,variant:t="primary",size:a="md",isLoading:r,children:l,disabled:d,...o},c)=>(0,s.jsxs)("button",{ref:c,className:(0,i.cn)("inline-flex items-center justify-center rounded-lg font-medium transition-all focus:outline-none focus:ring-2 focus:ring-[#1E3A5F]/50 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-gradient-to-r from-[#161B33] to-[#142841] text-white shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all duration-300 border border-white/10",secondary:"glass-button text-[#1E3A5F] bg-white/40 hover:bg-white/60",outline:"glass-button border border-[#1E3A5F]/30 text-[#1E3A5F] hover:bg-[#1E3A5F]/5",ghost:"text-[#1E3A5F] hover:bg-[#1E3A5F]/10",danger:"glass-button bg-gradient-to-r from-[#F56565] to-[#E53E3E] text-white border-0"}[t],{sm:"h-8 px-3 text-sm",md:"h-10 px-4 py-2",lg:"h-12 px-6 text-lg"}[a],e),disabled:d||r,...o,children:[r&&s.jsx(n.Z,{className:"mr-2 h-4 w-4 animate-spin"}),l]}));l.displayName="Button"},17596:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var s=a(97247),r=a(28964),i=a(40677);let n=(0,r.forwardRef)(({className:e,...t},a)=>s.jsx("div",{ref:a,className:(0,i.cn)("glass rounded-2xl p-6 transition-all duration-300",e),...t}));n.displayName="Card"},222:(e,t,a)=>{"use strict";a.d(t,{AuthProvider:()=>c,a:()=>u});var s=a(97247),r=a(28964),i=a(85503),n=a(62216),l=a(94082),d=a(34178);let o=(0,r.createContext)({user:null,firebaseUser:null,loading:!0,emailVerified:!1,logout:async()=>{},refreshUser:async()=>{}});function c({children:e}){let[t,a]=(0,r.useState)(null),[c,u]=(0,r.useState)(null),[p,h]=(0,r.useState)(!0),[m,x]=(0,r.useState)(!1),f=(0,d.useRouter)(),g=async e=>{try{let t=await (0,n.QT)((0,n.JU)(l.db,"users",e.uid));t.exists()?a({id:t.id,...t.data()}):a(null)}catch(e){console.error("Error fetching user data:",e),a(null)}},y=async()=>{await (0,i.w7)(l.I),a(null),u(null),x(!1),f.push("/login")},b=async()=>{let e=l.I.currentUser;e&&(await e.reload(),x(e.emailVerified),await g(e))};return s.jsx(o.Provider,{value:{user:t,firebaseUser:c,loading:p,emailVerified:m,logout:y,refreshUser:b},children:e})}let u=()=>(0,r.useContext)(o)},94082:(e,t,a)=>{"use strict";a.d(t,{I:()=>l,V:()=>o,db:()=>d});var s=a(68132),r=a(85503),i=a(62216);let n=0===(0,s.C6)().length?(0,s.ZF)({apiKey:"AIzaSyDL2GylAt2YVRSstEpp4hucbcqw7RuVk4o",authDomain:"internship-matching-app.firebaseapp.com",projectId:"internship-matching-app",messagingSenderId:"299078518812",appId:"1:299078518812:web:03ad34bb4323c497a677d9"}):(0,s.C6)()[0],l=(0,r.v0)(n),d=(0,i.ad)(n),o=new r.hJ},67413:(e,t,a)=>{"use strict";async function s(e,t,a){try{let s=await fetch("/api/send-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:e,subject:t,body:a})});if(!s.ok)return console.error("Failed to send email:",await s.text()),!1;return!0}catch(e){return console.error("Error sending email:",e),!1}}a.d(t,{C:()=>s})},40677:(e,t,a)=>{"use strict";a.d(t,{cn:()=>i});var s=a(61929),r=a(35770);function i(...e){return(0,r.m6)((0,s.W)(e))}},68170:(e,t,a)=>{"use strict";a.d(t,{v:()=>l});var s=a(94082),r=a(62216),i=a(67413);class n{async getUserEmail(e){try{let t=await (0,r.QT)((0,r.JU)(s.db,"users",e));if(t.exists())return t.data().email}catch(e){console.error("Error fetching user email:",e)}return null}async applyJob(e,t,a,n=""){try{let l=await (0,r.i3)(s.db,async i=>{let l=(0,r.hJ)(s.db,"applications"),d=(0,r.IO)(l,(0,r.ar)("studentId","==",e),(0,r.ar)("status","in",["pending_admin","pending_company","pending_student","matched"]));if(!(await (0,r.PL)(d)).empty)throw Error("Already have an active application");let o=(0,r.JU)((0,r.hJ)(s.db,"applications")),c={jobId:t,studentId:e,companyId:a,status:"pending_admin",message:n,createdAt:(0,r.Bt)(),updatedAt:(0,r.Bt)()},u=(0,r.JU)((0,r.hJ)(s.db,"notifications")),p={userId:"admin",type:"job_applied",title:"新規応募がありました",message:`求人ID: ${t} に新しい応募があります。`,link:`/admin/applications/${o.id}`,read:!1,createdAt:(0,r.Bt)()};return i.set(o,c),i.set(u,p),o.id}),d=await this.getUserEmail(e);return d&&await (0,i.C)(d,"【Internship Match】応募完了のお知らせ",`求人への応募が完了しました。

管理者の確認をお待ちください。
求人ID: ${t}`),l}catch(e){throw console.error("MatchingService.applyJob error:",e),e}}async acceptMatchByStudent(e,t){await (0,r.i3)(s.db,async a=>{let i=(0,r.JU)(s.db,"applications",e),n=await a.get(i);if(!n.exists())throw Error("Application not found");let l=n.data();if(l.studentId!==t)throw Error("Unauthorized");if("pending_student"!==l.status)throw Error("Invalid status");a.update(i,{status:"matched",updatedAt:(0,r.Bt)()});let d=(0,r.JU)((0,r.hJ)(s.db,"matches")),o={applicationId:e,jobId:l.jobId,studentId:l.studentId,companyId:l.companyId,status:"active",startDate:(0,r.Bt)(),createdAt:(0,r.Bt)()};a.set(d,o),a.update(i,{matchId:d.id});let c=(0,r.JU)((0,r.hJ)(s.db,"notifications"));a.set(c,{userId:l.companyId,type:"offer_accepted",title:"マッチング成立！",message:"学生がオファーを承諾しました。インターンシップの準備を始めましょう。",link:`/company/intern/${d.id}`,read:!1,createdAt:(0,r.Bt)()})});try{let t=await (0,r.QT)((0,r.JU)(s.db,"applications",e));if(t.exists()){let e=t.data(),a=await this.getUserEmail(e.companyId);a&&await (0,i.C)(a,"【Internship Match】マッチング成立のお知らせ",`学生がオファーを承諾しました！

マイページから詳細を確認してください。`)}}catch(e){console.error("Email send failed:",e)}}async approveByCompany(e,t){await (0,r.i3)(s.db,async a=>{let i=(0,r.JU)(s.db,"applications",e),n=await a.get(i);if(!n.exists())throw Error("Application not found");let l=n.data();if(l.companyId!==t)throw Error("Unauthorized");if("pending_company"!==l.status)throw Error("Invalid status (Must be pending_company)");a.update(i,{status:"pending_student",updatedAt:(0,r.Bt)()});let d=(0,r.JU)((0,r.hJ)(s.db,"notifications"));a.set(d,{userId:l.studentId,type:"offer_received",title:"マッチングオファーが届きました！",message:"企業があなたの応募に関心を持っています。オファーを確認してください。",link:"/student/applications",read:!1,createdAt:(0,r.Bt)()})});try{let t=await (0,r.QT)((0,r.JU)(s.db,"applications",e));if(t.exists()){let e=t.data(),a=await this.getUserEmail(e.studentId);a&&await (0,i.C)(a,"【Internship Match】オファー受信のお知らせ",`企業からオファーが届きました！

マイページから確認・承諾を行ってください。`)}}catch(e){console.error("Email send failed:",e)}}async rejectByCompany(e,t){await (0,r.i3)(s.db,async a=>{let i=(0,r.JU)(s.db,"applications",e),n=await a.get(i);if(!n.exists())throw Error("Application not found");let l=n.data();if(l.companyId!==t)throw Error("Unauthorized");a.update(i,{status:"rejected_by_company",updatedAt:(0,r.Bt)()});let d=(0,r.JU)((0,r.hJ)(s.db,"notifications"));a.set(d,{userId:l.studentId,type:"offer_rejected",title:"選考結果のお知らせ",message:"残念ながら今回の応募は見送られました。",link:"/student/applications",read:!1,createdAt:(0,r.Bt)()})});try{let t=await (0,r.QT)((0,r.JU)(s.db,"applications",e));if(t.exists()){let e=t.data(),a=await this.getUserEmail(e.studentId);a&&await (0,i.C)(a,"【Internship Match】選考結果のお知らせ",`残念ながら、今回の応募は見送られました。
またの応募をお待ちしております。`)}}catch(e){console.error("Email send failed:",e)}}async approveByAdmin(e){await (0,r.i3)(s.db,async t=>{let a=(0,r.JU)(s.db,"applications",e),i=await t.get(a);if(!i.exists())throw Error("Application not found");let n=i.data();if("pending_admin"!==n.status)throw Error("Invalid status");t.update(a,{status:"pending_company",updatedAt:(0,r.Bt)()});let l=(0,r.JU)((0,r.hJ)(s.db,"notifications"));t.set(l,{userId:n.companyId,type:"application_approved_admin",title:"新しい応募が届きました",message:"管理者承認済みの応募があります。内容を確認してください。",link:"/company/applicants",read:!1,createdAt:(0,r.Bt)()})});try{let t=await (0,r.QT)((0,r.JU)(s.db,"applications",e));if(t.exists()){let e=t.data(),a=await this.getUserEmail(e.companyId);a&&await (0,i.C)(a,"【Internship Match】新規応募のお知らせ",`新しい応募が届きました（管理者承認済み）。

マイページから応募者を確認してください。`)}}catch(e){console.error("Email send failed:",e)}}}let l=new n},58161:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(45347).createProxy)(String.raw`/Users/kazuma/Documents/dev/intern/internship-matching/src/app/(student)/student/applications/page.tsx#default`)},52052:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(45347).createProxy)(String.raw`/Users/kazuma/Documents/dev/intern/internship-matching/src/app/(student)/student/layout.tsx#default`)},15539:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o,metadata:()=>d});var s=a(72051),r=a(23635),i=a.n(r);a(5023);var n=a(45347);let l=(0,n.createProxy)(String.raw`/Users/kazuma/Documents/dev/intern/internship-matching/src/contexts/AuthContext.tsx#AuthProvider`);(0,n.createProxy)(String.raw`/Users/kazuma/Documents/dev/intern/internship-matching/src/contexts/AuthContext.tsx#useAuth`);let d={title:"Internship Matching",description:"Internship Matching Platform"};function o({children:e}){return s.jsx("html",{lang:"ja",children:s.jsx("body",{className:i().className,children:s.jsx(l,{children:e})})})}},73881:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var s=a(54564);let r=e=>[{type:"image/x-icon",sizes:"48x48",url:(0,s.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},5023:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[379,24,564,790,906,557],()=>a(57255));module.exports=s})();